<!doctype html>

<!--[if lt IE 7 ]> <html class="ie ie6 no-js" lang="ca"> <![endif]-->
<!--[if IE 7 ]>    <html class="ie ie7 no-js" lang="ca"> <![endif]-->
<!--[if IE 8 ]>    <html class="ie ie8 no-js" lang="ca"> <![endif]-->
<!--[if IE 9 ]>    <html class="ie ie9 no-js" lang="ca"> <![endif]-->
<!--[if gt IE 9]><!--><html class="no-js" lang="ca"><!--<![endif]-->
<!-- the "no-js" class is for Modernizr. -->

<head id="www-sitename-com" data-template-set="html5-reset">

	<meta charset="utf-8">
	
	<!-- Always force latest IE rendering engine (even in intranet) & Chrome Frame -->
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	
	<title>Llenguatges de marques i sistemes de gestió d'informació</title>
	
<!-- <meta name="title" content=""> --> 
	<meta name="description" content="">
	<!-- Google will often use this as its description of your page/site. Make it good. -->
	
	<meta name="google-site-verification" content="">
	<!-- Speaking of Google, don't forget to set your site up: http://google.com/webmasters -->
	
	<meta name="author" content="Institut Obert de Catalunya">
	<meta name="Copyright" content="Copyright Institut Obert de Catalunya 2011. All Rights Reserved.">

	<!-- Dublin Core Metadata : http://dublincore.org/ -->
	<meta name="DC.title" content="Llenguatges de marques i sistemes de gestió d'informació">
	<meta name="DC.subject" content="Informàtica i comunicacions">
	<meta name="DC.creator" content="Institut Obert de Catalunya">
	
	<!--  Mobile Viewport Fix
	j.mp/mobileviewport & davidbcalhoun.com/2010/viewport-metatag 
	device-width : Occupy full width of the screen in its current orientation
	initial-scale = 1.0 retains dimensions instead of zooming out if page height > device height
	maximum-scale = 1.0 retains dimensions instead of zooming in if page width < device width
	-->
	<!-- Uncomment to use � use thoughtfully!
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
	-->

	<link rel="shortcut icon" href="../../../img/favicon.ico">
	<!-- This is the traditional favicon.
		 - size: 16x16 or 32x32
		 - transparency is OK
		 - see wikipedia for info on browser support: http://mky.be/favicon/ -->
		 
	<link rel="apple-touch-icon" href="../../../img/apple-touch-icon.png">
	<!-- The is the icon for iOS's Web Clip.
		 - size: 57x57 for older iPhones, 72x72 for iPads, 114x114 for iPhone4's retina display (IMHO, just go ahead and use the biggest one)
		 - To prevent iOS from applying its styles to the icon name it thusly: apple-touch-icon-precomposed.png
		 - Transparency is not recommended (iOS will put a black BG behind the icon) -->
	
	<!-- CSS: screen, mobile & print are all in the same file -->
	<link rel="stylesheet" href="../../../_/css/style.css">

	<!-- CSS: jQuery UI -->
	<link rel="stylesheet" href="../../../_/css/jquery-ui.css">
	
	<!-- all our JS is at the bottom of the page, except for Modernizr. -->
	<script src="../../../_/js/modernizr-1.7.min.js"></script>
	<script src="../../../_/js/Hyphenator.js" type="text/javascript"></script>
	<script type="text/javascript">
	   Hyphenator.config({
		minwordlength : 4
	   });
	   Hyphenator.run();
	</script>
    <script src="../../../_/js/build.js" type="text/javascript"></script>
</head>

<body class="style-newspaper">

<div class="wrapper"><!-- not needed? up to you: http://camendesign.com/code/developpeurs_sans_frontieres -->

	<header id="header">
		<div class="head"><a href="http://ioc.gencat.cat"><img src="../../../img/logo.png" alt="Institut Obert de Catalunya"/></a><a href="http://creativecommons.org/licenses/by-nc-sa/3.0/es/deed.ca"><img src="../../../img/license.png" alt="Llic&egrave;ncia" class="license"/></a></div>
		<div class="headdocument"><a href="../../../index.html">Llenguatges de marques i sistemes de gestió d'informació</a></div>
        <div id="search" class="search" name="search">
         <form id="frmsearch" action="../../../search.html" method="get">
          <input type="text" name="q"/>
        </form>
        </div>
	</header>
   <div id="upbutton" class="upbutton" style="display:none;"><img src="../../../img/uparrow.png" alt="Pujar a l'inici de p&agrave;gina"/></div>
   <aside id="aside">
    <div id="menu">
      <ul>
       <li name="toc"><div><img src="../../../img/toc.png" alt="&Iacute;ndex"/></div></li>
       <li name="settings"><div><img src="../../../img/settings.png" alt="Configuraci&oacute;"/></div></li>
       <li name="printer"><div><img src="../../../img/printer.png" alt="Imprimir"/></div></li>
       <li name="favorites"><div><img src="../../../img/favorites.png" alt="Favorits"/></div></li>
       <li name="help_icon" class="help_icon"><div><img src="../../../img/help_icon.png" alt="Ajuda"/></div></li>
      </ul>
     </div>
   </aside>
   <div id="sidebar-hide" name="sidebar-hide"><img src="../../../img/arrows.png"/></div>
   <section>
     <div id="toc" class="hidden">
      <div class="menucontent">
        <ul>
        <li id="u2" class="parentnode"><p><a class="unit" href="../../../WebContent/u2/introduccio.html">2. Transmissió d'informació a través del web. Mecanismes de validació de documents XML</a></p><ul class="expander"><li id="u2introduccio"><a href="../../../WebContent/u2/introduccio.html">Introducció</a></li><li id="u2resum"><a href="../../../WebContent/u2/resum.html">Resum</a></li><li id="u2objectius"><a href="../../../WebContent/u2/objectius.html">Resultats d'aprenentatge</a></li><li id="u2referencies"><a href="../../../WebContent/u2/referencies.html">Referències</a></li><li id="u2a1" class="tocsection"><p id='u2a1continguts'><a class="section" href="../../../WebContent/u2/a1/continguts.html">Utilització dels llenguatges de marques en entorns web</a><span class="buttonexp"></span></p><ul><li id="u2a1activitats"><a href="../../../WebContent/u2/a1/activitats.html">Activitats</a></li><li id="u2a1exercicis"><a href="../../../WebContent/u2/a1/exercicis.html">Exercicis d'autoavaluació</a></li></ul></li><li id="u2a2" class="tocsection"><p id='u2a2continguts'><a class="section" href="../../../WebContent/u2/a2/continguts.html">Definició d'esquemes i vocabularis en XML</a><span class="buttonexp"></span></p><ul><li id="u2a2activitats"><a href="../../../WebContent/u2/a2/activitats.html">Activitats</a></li><li id="u2a2exercicis"><a href="../../../WebContent/u2/a2/exercicis.html">Exercicis d'autoavaluació</a></li></ul></li></ul></li><li id="" class="indexnode"><p><a href="../../../index.html">Anar a l&#39;&iacute;ndex general</a></p></li>
        </ul>
      </div>
    </div>
   </section>
   <section>
   <div id="settings" class="hidden">
    <div class="menucontent">
     <div class="allsettings">
     <div class="settings">
      <label>Font i Color</label>
		<div class="setting-option">
	        <ul class="fontBackground">
				<li id="style-newspaper" title="Newspaper" class="appearance-style-newspaper"><span>Newspaper</span></li>
                <li id="style-novel" title="Novel" class="appearance-style-novel"><span>Novel</span></li>
                <li id="style-ebook" title="eBook" class="appearance-style-ebook"><span>eBook</span></li>
				<li id="style-inverse" title="Inverse" class="appearance-style-inverse active"><span>Inverse</span></li>
				<li id="style-athelas" title="Athelas" class="appearance-style-athelas"><span>Athelas</span></li>
			</ul>
		</div>
     </div>
	<div class="settings">
      <label>Amplada</label>
		<div class="setting-option">
	        <div id="slider-width"></div>
		</div>
     </div>
     <div class="settings">
      <label>Mida de la font</label>
		<div class="setting-option">
	        <div id="slider-font"></div>
		</div>
     </div>
     <div class="settings">
      <label>Mida de la font</label>
	  <div class="setting-option">
       <form action="" class="sett-options">
		<ul>
		    <li><input type="checkbox" id="secondary-content" /><label for="secondary-content">Mostra recursos complementaris</label></li>
		    <li><input type="checkbox" id="main-images" /><label for="main-images">Mostra imatges</label></li>
		    <li><input type="checkbox" id="text-alignment" /><label for="text-alignment">Text justificat</label></li>
			<li><input type="checkbox" id="text-hyphen" /><label for="text-hyphen">Partici&oacute; sil·l&agrave;bica</label></li>
		</ul>
       </form>
	  </div>
     </div>
     </div>
    </div>
   </div>
   </section>
 <section>
 <div id="favorites" class="hidden"></div>
 </section>   
 <div id="bridge" class="hidden"></div>
 <div id="help" class="hidden">
  <div class="helptitle">Dreceres del teclat<hr></div>
  <div class="helpsection"><span>General</span>
   <ul>
    <li><span class="shortcut">g</span>: Anar al men&uacute; de navegaci&oacute;</li>
    <li><span class="shortcut">o</span>: Anar a opcions</li>
    <li><span class="shortcut">s</span>: Guardar la p&agrave;gina actual a favorits</li>
    <li><span class="shortcut">p</span>: Imprimir la p&agrave;gina actual</li>
    <li><span class="shortcut">?</span>: Mostrar/Ocultar l&#39;ajuda</li>
   </ul>
  </div>
  <div class="helpsection"><span>Navegaci&oacute;</span>
   <ul>
    <li><span class="shortcut">i</span>: Anar a l&#39;&iacute;ndex general</li>
    <li><span class="shortcut">t</span>: Anar a l&#39;inici de p&agrave;gina</li>
    <li><span class="shortcut">b</span>: Anar al final de p&agrave;gina</li>
    <li><span class="shortcut">j</span>: Anar cap endavant dintre la p&agrave;gina</li>
    <li><span class="shortcut">k</span>: Anar cap enrere dintre la p&agrave;gina</li>
    <li><span class="shortcut">h</span>: Anar a la p&agrave;gina anterior:</li>
    <li><span class="shortcut">l</span>: Anar a la p&agrave;gina seg&uuml;ent:</li>
   </ul>
   </div>
 </div>
 <div id="favcounter" name="favcounter" class="hidden"><span></span></div>
 <div id="navmenu" class="navmenu"><ul class="webnav"><li><a href="../../../index.html" title="Anar a l&#39;&iacute;ndex general">Inici</a></li><li><a href="../introduccio.html">Transmissió d'informació a través del web. Mecanismes de validació de ...</a></li><li>Definició d'esquemes i vocabularis en XML</li></ul></div>
	<div id="content" lang="ca" class="hyphenate text">
     <article lang="ca" class="sheet">
        <h1><a id="definicio_d_esquemes_i_vocabularis_en_xml"> Definició d'esquemes i vocabularis en XML </a></h1>
    	
<p>
L’XML permet crear els llenguatges de marques que vulguem, sigui quin sigui el camp d’actuació, ja que en deixar crear les etiquetes que calguin es pot adaptar a qualsevol situació. Aquest és el punt fort de l’XML sobre altres llenguatges de marques: s’adapta al que es vulgui representar sense importar la complexitat que pugui tenir. 
</p>

<p>
Però les dades dels documents XML normalment hauran de ser processades per un programa d’ordinador, i els programes d’ordinador no donen tanta llibertat com l’XML. Aquests no són gaire bons interpretant i entenent informació per a la qual no han estat programats per processar. 
</p>

<p>
Suposem que s’ha desenvolupat un programa per representar imatges a partir de les etiquetes <code>&lt;dibuix&gt;</code>, <code>&lt;rectangle&gt;</code>, <code>&lt;cercle&gt;</code>. Des d’un punt de vista de la llibertat que deixa l’XML no hi haurà cap problema per crear un arxiu XML com aquest:
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;dibuix<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">   <span class="sc3"><span class="re1">&lt;rectangle<span class="re2">&gt;</span></span></span>12,10,14,10<span class="sc3"><span class="re1">&lt;/rectangle<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">   <span class="sc3"><span class="re1">&lt;linia<span class="re2">&gt;</span></span></span>13,13,25,25<span class="sc3"><span class="re1">&lt;/linia<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;/dibuix<span class="re2">&gt;</span></span></span></div></li></ol></pre>

<p>
El document és perfectament correcte des d’un punt de vista de l’XML però el programa no sabrà què fer amb l’etiqueta <code>&lt;linia&gt;</code> perquè ningú no l’ha programat. És per aquest motiu que els programes normalment es dissenyen per processar només tipus concrets d’XML. 
</p>

<p>
Per tant, una de les coses que haurà de fer un programa és comprovar que les dades del document XML siguin correctes. Com que aquesta tasca és molt feixuga s’han definit sistemes per comprovar que el document XML entrat conté les etiquetes que ha de contenir i que estan col·locades tal com fa falta. El procés de fer aquestes comprovacions s’anomena <strong>validació</strong>.
</p>

<h2><a id="validacio_de_documents_xml" >Validació de documents XML</a></h2>
<div class="level2">

<p>
El procés de comprovar que uns fitxers XML determinats segueixen un determinat vocabulari s’anomena <strong>validació</strong> i els documents XML que segueixen les regles del vocabulari s’anomenen <strong>documents vàlids</strong>. Cal tenir clara la diferència entre el que és un document ben format i un document vàlid:
</p>
<div class="iocimportant"><div class="ioccontent">
<p>
Un document és <strong>ben format</strong> quan segueix les regles d’XML.
</p>

<p>
Un document és <strong>vàlid</strong> si segueix les normes del vocabulari que té associat.
</p>
</div></div>
<p>
Un document pot complir perfectament amb les regles de creació de documents XML i, per tant, estar <strong>ben format</strong>, però en canvi no seguir les normes del vocabulari i, per tant, <strong>no ser vàlid</strong>. 
</p>
<div class="iocimportant"><div class="ioccontent">
<p>
Un document pot ser ben format però no vàlid, i en canvi si és vàlid segur que és ben format.
</p>
</div></div>
<p>
La validació de documents és un procés corrent en llenguatges de marques, ja que no sempre la persona que defineix com ha de ser el document després és la que generi els documents (de vegades els documents arribaran d’altres llocs, es generaran automàticament…).
</p>
<div class="iocimportant"><div class="ioccontent">
<p>
La validació és el procés de comprovar que un document compleix amb les regles del vocabulari en tots els seus aspectes.
</p>
</div></div>
<p>
La validació permet assegurar que la informació està exactament en la manera com ha d’estar. Això és especialment important quan es comparteix informació entre sistemes, ja que validar el document és assegurar-se que realment l’estructura de la informació que s’està passant és la correcta. Si es vol fer que dos programes situats en ordinadors diferents col·laborin cal que la informació que es passen l’un a l’altre segueixi l’estructura prefixada per enviar-se missatges. 
</p>

<p>
Per forçar una determinada estructura en un document cal que hi hagi alguna manera de definir aspectes com ara:
</p>
<ul>
<li class="level1"><div class="li"> en quin ordre han d’anar les etiquetes, </div>
</li>
<li class="level1"><div class="li"> quines són correctes i quines no, </div>
</li>
<li class="level1"><div class="li"> en quin ordre han d’aparèixer, </div>
</li>
<li class="level1"><div class="li"> quins atributs s’hi poden posar, </div>
</li>
<li class="level1"><div class="li"> quin contingut hi pot haver, </div>
</li>
<li class="level1"><div class="li"> etc. </div>
</li>
</ul>

<p>
L’XML fa això per mitjà de <strong>llenguatges de definició de vocabularis</strong> o <strong>llenguatges d’esquemes</strong>.
</p>

<p>
Els llenguatges de definició d’esquemes sorgeixen per la necessitat que els documents XML siguin processats per programes (per extreure’n informació, transformar-los en altres coses, etc), ja que els programes no són tan flexibles com l’XML i necessiten processar dades amb estructures de document tancades. 
</p>

<p>
Hi ha molts llenguatges de definició d’esquemes, però els més utilitzats en XML són:
</p>
<ul>
<li class="level1"><div class="li"> <em>Document type definitions</em> (DTD)</div>
</li>
<li class="level1"><div class="li"> <em><acronym title="World Wide Web Consortium">W3C</acronym> XML definition language</em></div>
</li>
<li class="level1"><div class="li"> Relax NG</div>
</li>
<li class="level1"><div class="li"> Schematron</div>
</li>
</ul>
<div class="iocimportant"><div class="ioccontent">
<p>
El procés de validació es fa per mitjà de programes especials anomenats <strong>processadors</strong> o <strong>validadors</strong> (en anglès s’anomenen <strong>parsers</strong>).
</p>
</div></div>
<p>
Els validadors sovint estan en forma de biblioteques per poder ser incorporats als programes. No tots els processadors poden validar tots els llenguatges de definició de vocabularis i, per tant, s’hauran de triar en funció del llenguatge que fem servir.
</p>

</div>

<h2><a id="processadors_d_xml" >Processadors d&#039;XML</a></h2>
<div class="level2">

<p>
Els processadors XML són els encarregats de validar els documents i, per tant, és molt important triar un processador que sigui capaç de validar el llenguatge de validació que fem servir:
</p>
<ul>
<li class="level1"><div class="li"> El fet que la DTD sigui el sistema més antic i que se’n parli en l’especificació d’XML ha fet que la majoria dels processadors XML puguin validar llenguatges definits amb DTD.</div>
</li>
<li class="level1"><div class="li"> Amb el pas del temps, XML Schemas s’ha convertit en la manera estàndard de validar vocabularis XML, i altres tecnologies XML en fan servir alguns aspectes. Per tant, la majoria dels processadors també suporten aquest format.</div>
</li>
<li class="level1"><div class="li"> Molts processadors a part dels dos més usats també poden fer servir altres llenguatges (en especial Relax NG). </div>
</li>
</ul>

</div>

<h3><a id="biblioteques_per_validar_xml" >Biblioteques per validar XML</a></h3>
<div class="level3">

<p>
Els documents XML estan pensats per poder ser tractats de manera automàtica, i moltes de les utilitats per validar documents estan en forma de biblioteques. Entre les biblioteques existents per validar XML en podem destacar:
</p>
<ul>
<li class="level1"><div class="li"> libxml2</div>
</li>
<li class="level1"><div class="li"> MSXML</div>
</li>
<li class="level1"><div class="li"> Apache Xerces2 </div>
</li>
</ul>

</div>

<h4><a id="libxml2" >libxml2</a></h4>
<div class="level4">

<p>
La utilitat <em>libxml</em> de la biblioteca <em>libxml2</em> del projecte Gnome permet validar documents XML que tinguin associats DTD, XML Schemas, Relax NG o Schematron.
</p>

</div>

<h5><a id="validar_dtd" >Validar DTD</a></h5>
<div class="level5">

<p>
La manera més senzilla de fer-ho és especificar el paràmetre <code>–valid</code>, que fa que el programa, a més de comprovar que el document XML estigui ben format, sigui vàlid. 
</p>

<p>
Amb el paràmetre <code>–noout</code> no es mostrarà cap missatge si el document és correcte.
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1">$ xmllint <span class="re5">--valid</span> prova.xml <span class="re5">--noout</span></div></li><li class="li1"><div class="de1">$</div></li></ol></pre>

<p>
També ofereix l’opció de validar un document extern amb el paràmetre <code>–dtdvalid</code>. Això és especialment interessant per poder validar sense haver d’associar el document XML i la DTD.
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1">$ xmllint alumnes.xml <span class="re5">--dtdvalid</span> alumnes.dtd <span class="re5">--noout</span></div></li><li class="li1"><div class="de1">$</div></li></ol></pre>

<p>
En cas que el document no validi mostrarà l’error trobat:
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1">$ xmllint <span class="re5">--valid</span> prova.xml <span class="re5">--noout</span></div></li><li class="li1"><div class="de1">prova.xml:<span class="nu0">13</span>: element classe: validity error : </div></li><li class="li1"><div class="de1">Element classe content does not follow the DTD, </div></li><li class="li1"><div class="de1">expecting <span class="br0">&#40;</span>classe , professor , alumnes<span class="br0">&#41;</span>, got <span class="br0">&#40;</span>professor alumnes <span class="br0">&#41;</span></div></li><li class="li1"><div class="de1"><span class="sy0">&lt;/</span>classe<span class="sy0">&gt;</span></div></li><li class="li1"><div class="de1">         ^</div></li></ol></pre>

</div>

<h5><a id="validar_xml_schemas" >Validar XML Schemas</a></h5>
<div class="level5">

<p>
Per validar un document amb un XML Schema s’ha d’especificar el document d’esquema fent servir el paràmetre <code>–schema</code>:
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1">xmllint <span class="re5">--schema</span> classe.xsd classe.xml  <span class="re5">--noout</span></div></li><li class="li1"><div class="de1">classe.xml validates</div></li></ol></pre>

<p>
Si no valida mostrarà els errors que hi hagi detectat:
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1">$ xmllint <span class="re5">--schema</span> classe.xsd classe.xml  <span class="re5">--noout</span> <span class="re5">--valid</span></div></li><li class="li1"><div class="de1">classe.xml:<span class="nu0">3</span>: element curs: Schemas validity error : </div></li><li class="li1"><div class="de1">Element <span class="st_h">'curs'</span>: This element is not expected. Expected is <span class="br0">&#40;</span> professor <span class="br0">&#41;</span>.</div></li><li class="li1"><div class="de1">classe.xml fails to validate</div></li></ol></pre>

</div>

<h5><a id="validar_amb_relax_ng_i_schematron" >Validar amb Relax NG i Schematron</a></h5>
<div class="level5">

<p>
No hi ha massa diferències a l’hora de validar contra Relax NG o Schematron. Simplement s’especifica el paràmetre correcte. Per a Relax NG és <code>–relaxng</code>:
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1">$ xmllint <span class="re5">--relaxng</span> classe.rng classe.xml  <span class="re5">--noout</span> </div></li><li class="li1"><div class="de1">classe.xml validates</div></li></ol></pre>

</div>

<h4><a id="msxml" >MSXML</a></h4>
<div class="level4">

<p>
Des dels entorns Windows es pot fer servir la biblioteca MSXML per validar els documents XML contra DTD o XML Schema. 
</p>

<p>
Aquesta biblioteca ofereix una interfície per desenvolupar aplicacions que treballin amb diferents tecnologies XML. Es fa servir en molts dels programes de Microsoft i és la que fan servir per defecte els programes basats en la plataforma .NET (C#, Visual Basic, J#, managed C++ …). 
</p>

<p>
Alguns dels editors especialitzats en XML que funcionen exclusivament en Windows fan servir aquesta biblioteca per funcionar.
</p>

</div>

<h4><a id="apache_xerces2" >Apache Xerces2</a></h4>
<div class="level4">

<p>
Aquesta biblioteca està pensada per ser usada des de programes i no des de la línia d’ordres (per exemple, molts dels editors especialitzats en XML fan o permeten fer servir Xerces2 per validar els documents XML). A pesar d’això, sí que és possible validar un document des de la línia d’ordres si s’instal·len els exemples, ja que contenen un programa anomenat <strong>Counter</strong> que permet fer estadístiques d’un document i que alhora valida.
</p>

<p>
En una instal·lació d’Ubuntu s’executaria el programa i donaria el resultat següent:
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1">$ java <span class="re5">-cp</span> <span class="sy0">/</span>usr<span class="sy0">/</span>share<span class="sy0">/</span>java<span class="sy0">/</span>xercesImpl.jar:\</div></li><li class="li1"><div class="de1"><span class="sy0">&gt;/</span>usr<span class="sy0">/</span>share<span class="sy0">/</span>java<span class="sy0">/</span>xmlParserAPIs.jar:\</div></li><li class="li1"><div class="de1"><span class="sy0">&gt;/</span>usr<span class="sy0">/</span>share<span class="sy0">/</span>doc<span class="sy0">/</span>libxerces2-java-doc<span class="sy0">/</span>examples<span class="sy0">/</span>xercesSamples.jar \  </div></li><li class="li1"><div class="de1">dom<span class="sy0">/</span>Counter <span class="re5">-v</span> alumnes.xml</div></li><li class="li1"><div class="de1"><span class="br0">&#91;</span>Error<span class="br0">&#93;</span> alumnes.xml:<span class="nu0">7</span>:<span class="nu0">11</span>: The content of element <span class="kw3">type</span> <span class="st0">&quot;alumne&quot;</span> is incomplete, it must match <span class="st0">&quot;(nom,cognom,cognom)&quot;</span>.</div></li><li class="li1"><div class="de1"><span class="br0">&#91;</span>Error<span class="br0">&#93;</span> alumnes.xml:<span class="nu0">11</span>:<span class="nu0">11</span>: The content of element <span class="kw3">type</span> <span class="st0">&quot;alumne&quot;</span> is incomplete, it must match <span class="st0">&quot;(nom,cognom,cognom)&quot;</span>.</div></li><li class="li1"><div class="de1"><span class="br0">&#91;</span>Error<span class="br0">&#93;</span> alumnes.xml:<span class="nu0">15</span>:<span class="nu0">11</span>: The content of element <span class="kw3">type</span> <span class="st0">&quot;alumne&quot;</span> is incomplete, it must match <span class="st0">&quot;(nom,cognom,cognom)&quot;</span>.</div></li><li class="li1"><div class="de1">alumnes.xml: <span class="nu0">229</span>;<span class="nu0">15</span>;<span class="nu0">0</span> ms <span class="br0">&#40;</span><span class="nu0">10</span> elems, <span class="nu0">9</span> attrs, <span class="nu0">31</span> spaces, <span class="nu0">36</span> chars<span class="br0">&#41;</span></div></li></ol></pre>

<p>
Si el document valida correctament mostrarà estadístiques del document:
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1">$ java <span class="re5">-cp</span> <span class="sy0">/</span>usr<span class="sy0">/</span>share<span class="sy0">/</span>java<span class="sy0">/</span>xercesImpl.jar:\</div></li><li class="li1"><div class="de1"><span class="sy0">&gt;/</span>usr<span class="sy0">/</span>share<span class="sy0">/</span>java<span class="sy0">/</span>xmlParserAPIs.jar:\</div></li><li class="li1"><div class="de1"><span class="sy0">&gt;/</span>usr<span class="sy0">/</span>share<span class="sy0">/</span>doc<span class="sy0">/</span>libxerces2-java-doc<span class="sy0">/</span>examples<span class="sy0">/</span>xercesSamples.jar \</div></li><li class="li1"><div class="de1"><span class="sy0">&gt;</span>dom<span class="sy0">/</span>Counter <span class="re5">-v</span> alumnes.xml</div></li><li class="li1"><div class="de1">alumnes.xml: <span class="nu0">39</span>;<span class="nu0">7</span>;<span class="nu0">0</span> ms <span class="br0">&#40;</span><span class="nu0">10</span> elems, <span class="nu0">9</span> attrs, <span class="nu0">31</span> spaces, <span class="nu0">36</span> chars<span class="br0">&#41;</span></div></li></ol></pre>

<p>
En estar desenvolupat en Java també pot ser executat en entorns Windows. Suposant que tinguem Xerces a C:\xerces es pot validar de la mateixa manera:
</p>
<pre class="code">c:\&gt; java -cp c:\xerces\xercesImpl.jar; 
c:\xerces\xmlParserAPIs.jar; 
c:\xerces\xercesSamples.jar dom/Counter -v alumnes.xml
alumnes.xml: 39;7;0 ms (10 elems, 9 attrs, 31 spaces, 36 chars)</pre>

</div>

<h3><a id="programes" >Programes</a></h3>
<div class="level3">

<p>
Tot i que els validadors sobretot es fan servir com a biblioteques incorporades en programes, també hi ha programes que permeten validar documents sense haver d’escriure ni una línia de codi. Exemples d’aquets tipus de programes poden ser XMLStarlet o Jing. 
</p>
<div class="iocexample"><div class="ioccontent"><p class="ioctitle">Validar amb XMLStarlet</p>
<p>
L’XMLStarlet és un programa de codi obert que s’executa des de línia d’ordres i que pot manipular fitxers XML. Fa servir <em>libxml2</em> i es pot baixar des de <a href="http://xmlstar.sourceforge.net/" class="urlextern" title="http://xmlstar.sourceforge.net/"  rel="nofollow">http://xmlstar.sourceforge.net/</a>.
</p>

<p>
Una de les tasques que s’hi poden fer és validar documents XML definits amb DTD, XML Schemas i Relax NG. Si el document ja té associada la DTD n’hi ha prou d’executar la instrucció amb <code>validate</code> i el nom del fitxer:
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1">$ xmlstarlet validate prova.xml </div></li><li class="li1"><div class="de1">prova.xml - valid</div></li></ol></pre>

<p>
O es pot especificar un fitxer de definició extern:
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1">$ xmlstarlet validate <span class="re5">--dtd</span> prova.dtd prova.xml</div></li><li class="li1"><div class="de1">prova.xml - valid</div></li></ol></pre>

<p>
Es pot fer el mateix per validar XML Schemas:
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1">$ xmlstarlet validate <span class="re5">--xsd</span> prova.xsd prova.xml</div></li><li class="li1"><div class="de1">prova.xml - valid</div></li></ol></pre>

<p>
El problema que té el programa és que no informa dels errors trobats:
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1">$ xmlstarlet validate <span class="re5">--xsd</span> classe.xsd classe.xml</div></li><li class="li1"><div class="de1">classe.xml - invalid</div></li></ol></pre>
</div></div>
<p>
Hi ha molts programes que permeten validar documents XML sense haver de programar, però el més habitual des d’un punt de vista professional sol ser fer servir algun editor XML especialitzat, com ara oXygen XML Editor, Editix XML Editor, Altova XMLSpy XML editor o Stylus Studio.
</p>

</div>

<h4><a id="editors_xml" >Editors XML</a></h4>
<div class="level4">

<p>
Els editors XML, a més de permetre la creació assistida de documents XML, també tenen alguna opció per fer validacions dels documents sense haver d’abandonar l’editor (<span class="figref"><a href="#fig95"><span>figura</span></a></span>).
</p>
<div class="iocfigure"><a name="fig95"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

 Validació des de l’XML Copy Editor

</figcaption><img src="../media/asxm04u2_09.png" alt="" /></figure>
</div>
<p>
Aquests editors també detecten els problemes de validació automàticament i marquen les línies amb errors (<span class="figref"><a href="#fig95b"><span>figura</span></a></span>).
</p>
<div class="iocfigure"><a name="fig95b"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

 No cal sortir de l’entorn per veure’n els errors

</figcaption><img src="../media/asxm04u2_10.png" alt="" /></figure>
</div>
<p>
Sovint també permeten validar documents XML contra gairebé tots els sistemes de validació: DTD, XML Schemas, Relax NG…
</p>

</div>

<h5><a id="validar_amb_l_oxygen_xml_editor" >Validar amb l&#039;oXygen XML Editor</a></h5>
<div class="level5">

<p>
Com a exemple de validació amb un editor especialitzat XML farem una validació des de l’oXygen XML Editor.
</p>

<p>
Un cop el document XML està carregat en el programa cal especificar contra quin document s’ha de validar. Això es fa des de l’opció <em>Configure Validation Scenario</em> (<span class="figref"><a href="#fig96"><span>figura</span></a></span>).
</p>
<div class="iocfigure"><a name="fig96"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

Configurar un escenari de validació amb l’oXygen

</figcaption><img src="../media/asxm04u2_11.png" alt="" /></figure>
</div>
<p>
En la pantalla següent es defineix una nova validació i es tria el fitxer d’esquema (<span class="figref"><a href="#fig97"><span>figura</span></a></span>).
</p>
<div class="iocfigure"><a name="fig97"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

Tria del fitxer per fer la validació

</figcaption><img src="../media/oxygendtd2.png" alt="" /></figure>
</div>
<p>
El fitxer quedarà associat al document de manera que cada vegada que es validi el document ho farà contra l’esquema triat automàticament (<span class="figref"><a href="#fig98"><span>figura</span></a></span>).
</p>
<div class="iocfigure"><a name="fig98"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

Validació d’XML amb l’oXygen XML Editor 12

</figcaption><img src="../media/asxm04u2_12.png" alt="" /></figure>
</div>
</div>

<h2><a id="dtd" >DTD</a></h2>
<div class="level2">

<p>
El DTD (<em>document type definitions</em>) és un llenguatge de definició d’esquemes que ja existia abans de l’aparició d’XML (es feia servir en SGML). En estar pensat per funcionar amb SGML es podia fer servir en molts dels llenguatges de marques que s’hi han basat, com XML o <acronym title="HyperText Markup Language">HTML</acronym>.
</p>

<p>
Quan es va definir l’XML es va aprofitar per fer una versió simplificada de DTD que en fos el llenguatge d’especificació d’esquemes original. Un avantatge associat era que fer servir una versió de DTD permetria mantenir la compatibilitat amb SGML, i per tant es van referenciar les DTD en l’especificació d’XML (<a href="http://www.w3.org/TR/REC-xml/" class="urlextern" title="http://www.w3.org/TR/REC-xml/"  rel="nofollow">http://www.w3.org/TR/REC-xml/</a>).
</p>

<p>
L’objectiu principal de les DTD és proveir un mecanisme per validar les estructures dels documents XML i determinar si el document és <strong>vàlid</strong> o no. Però aquest no serà l’únic avantatge que ens aportaran les DTD, sinó que també els podrem fer servir per compartir informació entre organitzacions, ja que si algú altre té la nostra DTD ens pot enviar informació en el nostre format i amb el programa que hem fet la podrem processar.
</p>

<p>
Durant molt de temps les DTD van ser el sistema de definir vocabularis més usat en XML però actualment han estat superats per XML Schemas. Tot i això encara és molt usat, sobretot perquè és molt més senzill.
</p>

</div>

<h3><a id="associar_una_dtd_a_un_document_xml" >Associar una DTD a un document XML</a></h3>
<div class="level3">

<p>
Per poder validar un document XML cal especificar-li quin és el document d’esquemes que es farà servir. Si el llenguatge que es fa servir és DTD hi ha diverses maneres d’especificar-ho però en general sempre implicarà afegir una declaració <code>DOCTYPE</code> dins el document XML per validar.
</p>

<p>
El més habitual és afegir la referència a la DTD dins del document XML per mitjà de l’etiqueta especial <code>&lt;!DOCTYPE</code>. Com que la declaració XML és opcional però si n’hi ha ha de ser la primera cosa que aparegui en un document XML, l’etiqueta <code>DOCTYPE</code> haurà d’anar sempre darrere seu.
</p>

<p>
Per tant, seria incorrecte fer:
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc0">&lt;!DOCTYPE ... &gt;</span></div></li><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;?xml</span> <span class="re0">version</span>=<span class="st0">&quot;1.0&quot;</span><span class="re2">?&gt;</span></span></div></li></ol></pre>

<p>
Però, per altra banda, l’etiqueta no pot aparèixer en cap altre lloc que no sigui just a continuació de la declaració XML, i per tant tampoc no es pot incloure l’etiqueta <code>DOCTYPE</code> un cop hagi començat el document.
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;?xml</span> <span class="re0">version</span>=<span class="st0">&quot;1.0&quot;</span><span class="re2">?&gt;</span></span></div></li><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;document<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1"><span class="sc0">&lt;!DOCTYPE ...&gt;</span></div></li><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;/document<span class="re2">&gt;</span></span></span></div></li></ol></pre>

<p>
Ni tampoc al final: 
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;?xml</span> <span class="re0">version</span>=<span class="st0">&quot;1.0&quot;</span> <span class="re2">?&gt;</span></span></div></li><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;document<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;/document<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1"><span class="sc0">&lt;!DOCTYPE ... &gt;</span></div></li></ol></pre>

<p>
L’etiqueta <code>DOCTYPE</code> sempre ha d’anar o bé en la primera línia si no hi ha declaració XML, o bé just al darrere:
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;?xml</span> <span class="re0">version</span>=<span class="st0">&quot;1.0&quot;</span> <span class="re2">?&gt;</span></span></div></li><li class="li1"><div class="de1"><span class="sc0">&lt;!DOCTYPE ... &gt;</span></div></li><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;document<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;/document<span class="re2">&gt;</span></span></span></div></li></ol></pre>

<p>
Hi ha dues maneres d’incorporar DTD en un document XML:
</p>
<ul>
<li class="level1"><div class="li"> Declaració interna</div>
</li>
<li class="level1"><div class="li"> Declaració externa</div>
</li>
</ul>

</div>

<h4><a id="declaracio_dtd_interna" >Declaració DTD interna</a></h4>
<div class="level4">

<p>
En les declaracions DTD internes les regles de la DTD estan incorporades en el document XML. L’etiqueta <code>DOCTYPE</code> es declara com es veu en la <span class="figref"><a href="#fig99"><span>figura</span></a></span>.
</p>
<div class="iocfigure"><a name="fig99"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

Declaració DOCTYPE interna

</figcaption><img src="../media/asxm04u2_13.png" alt="" /></figure>
</div>
<p>
Per exemple, si es copien les línies següents en un document XML anomenat <code>prova.xml</code>:
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;?xml</span> <span class="re0">version</span>=<span class="st0">&quot;1.0&quot;</span><span class="re2">?&gt;</span></span></div></li><li class="li1"><div class="de1"><span class="sc0">&lt;!DOCTYPE classe [ </span></div></li><li class="li1"><div class="de1"><span class="sc0">    &lt;!ELEMENT classe (professor, alumnes)&gt;</span></div></li><li class="li1"><div class="de1">    <span class="sc3">&lt;!ELEMENT professor <span class="br0">&#40;</span>#PCDATA<span class="br0">&#41;</span><span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1">    <span class="sc3">&lt;!ELEMENT alumnes <span class="br0">&#40;</span>nom*<span class="br0">&#41;</span><span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1">    <span class="sc3">&lt;!ELEMENT nom <span class="br0">&#40;</span>#PCDATA<span class="br0">&#41;</span><span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1">  ]&gt;</div></li><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;classe<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">   <span class="sc3"><span class="re1">&lt;professor<span class="re2">&gt;</span></span></span>Marcel Puig<span class="sc3"><span class="re1">&lt;/professor<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">   <span class="sc3"><span class="re1">&lt;alumnes<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">      <span class="sc3"><span class="re1">&lt;nom<span class="re2">&gt;</span></span></span>Frededic Pi<span class="sc3"><span class="re1">&lt;/nom<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">   <span class="sc3"><span class="re1">&lt;/alumnes<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;/classe<span class="re2">&gt;</span></span></span></div></li></ol></pre>

<p>
Es pot comprovar que el document es valida fent servir la instrucció següent:
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1"><span class="co4">$ </span>xmllint <span class="re5">--valid</span> prova.xml <span class="re5">--noout</span></div></li></ol></pre>

<p>
Les declaracions de DTD internes no es fan servir gaire perquè tenen una sèrie de problemes que no les fan ideals:
</p>
<ul>
<li class="level1"><div class="li"> En tenir la definició de l’esquema dins del document XML no és fàcil compartir les declaracions amb altres documents.</div>
</li>
<li class="level1"><div class="li"> Si es tenen molts documents XML, per canviar lleugerament la declaració s’hi hauran de fer canvis en tots.</div>
</li>
</ul>

<p>
És per aquest motiu que és més recomanable tenir la DTD en un document a part i fer servir aquest document DTD per validar tots els XML.
</p>

</div>

<h4><a id="declaracio_dtd_externa" >Declaració DTD externa</a></h4>
<div class="level4">

<p>
En comptes d’especificar la DTD en el mateix document es considera una pràctica molt millor definir-la en un fitxer a part.
</p>

<p>
Per fer una declaració externa també es fa servir l’etiqueta <code>DOCTYPE</code> però el format és lleugerament diferent i preveu dues possibilitats:
</p>
<ul>
<li class="level1"><div class="li"> DTD privada</div>
</li>
<li class="level1"><div class="li"> DTD pública</div>
</li>
</ul>

</div>

<h5><a id="dtd_privades" >DTD privades</a></h5>
<div class="level5">

<p>
Les definicions de DTD privades són les més corrents, ja que, tot i que es defineixi el vocabulari com a privat, no hi ha res que impedeixi que el fitxer es comparteixi o es publiqui per mitjà d’Internet. La definició d’una DTD privada es fa de la manera que es pot veure en la <span class="figref"><a href="#fig100"><span>figura</span></a></span>.
</p>
<div class="iocfigure"><a name="fig100"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

 Definició d’una DTD privada en un document XML

</figcaption><img src="../media/asxm04u2_14.png" alt="" /></figure>
</div>
<p>
El camp d’<strong>adreça</strong> especifica on és i quin nom té el fitxer que conté les regles. Es pot especificar fent servir una <acronym title="Uniform Resource Identifier">URI</acronym> (<em>uniform resource identifier</em>). Això fa que es pugui definir la DTD per mitjà d’un nom que per definició hauria de ser únic. 
</p>

<p>
En el camp d’adreça es poden definir camins dins la màquina: 
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc0">&lt;!DOCTYPE classe SYSTEM &quot;C:\dtd\classe.dtd&quot;&gt;</span></div></li></ol></pre>
<div class="ioctext"><div class="ioccontent"><p class="ioctitle">URI</p>
<p>
Una <acronym title="Uniform Resource Identifier">URI</acronym> (<em>uniform resource identifier</em>) és una cadena de caràcters que es fa servir ‘er fer referència única a un recurs local, dins d’una xarxa o a Internet.
</p>
</div></div>
<p>
O fins i tot es pot definir una DTD per mitjà d’una adreça d’Internet:
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc0">&lt;!DOCTYPE classe SYSTEM &quot;http://www.ioc.cat/classe.dtd&quot;&gt;</span></div></li></ol></pre>

<p>
Per tant, podríem definir dins d’un fitxer XML una DTD que tingui l’element arrel <code>&lt;alumnes&gt;</code> d’aquesta manera:
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc0">&lt;!DOCTYPE alumnes SYSTEM &quot;alumnes.dtd&quot;&gt;</span></div></li></ol></pre>

<p>
Un cop definit només cal crear l’arxiu <code>alumnes.dtd</code> en el lloc adequat amb les regles que defineixen el vocabulari:
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;?xml</span> <span class="re0">version</span>=<span class="st0">&quot;1.0&quot;</span> <span class="re0">encoding</span>=<span class="st0">&quot;UTF-8&quot;</span><span class="re2">?&gt;</span></span></div></li><li class="li1"><div class="de1"><span class="sc3">&lt;!ELEMENT classe <span class="br0">&#40;</span>professor, alumnes<span class="br0">&#41;</span> <span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1"><span class="sc3">&lt;!ELEMENT professor <span class="br0">&#40;</span>#PCDATA<span class="br0">&#41;</span> <span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1"><span class="sc3">&lt;!ELEMENT alumnes <span class="br0">&#40;</span>nom*<span class="br0">&#41;</span> <span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1"><span class="sc3">&lt;!ELEMENT nom <span class="br0">&#40;</span>#PCDATA<span class="br0">&#41;</span> <span class="re2">&gt;</span></span></div></li></ol></pre>

</div>

<h5><a id="dtd_publiques" >DTD públiques</a></h5>
<div class="level5">

<p>
Les definicions <code>PUBLIC</code> estan reservades per a DTD que estiguin definides per organismes d’estandardització, ja siguin oficials o no. En la definició d’una DTD pública s’afegeix un camp extra que fa d’identificador de l’organisme (<span class="figref"><a href="#fig101"><span>figura</span></a></span>).
</p>
<div class="iocfigure"><a name="fig101"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

 Definició d’una DTD pública en un document XML

</figcaption><img src="../media/asxm04u2_15.png" alt="" /></figure>
</div>
<p>
La majoria dels camps són idèntics que en definir una DTD privada però en aquest cas s’hi ha afegit un camp més, que és un identificador. L’identificador pot estar en qualsevol format però el més corrent és fer servir el format FPI (<em>formal public identifiers</em>). L’FPI es defineix per mitjà d’un grup de quatre cadenes de caràcters separades pels dobles barres. En cada posició s’especifica:
</p>
<pre class="code">  &quot;simbol//Nom del responsable de la DTD//Document descrit//Idioma&quot;</pre>

<p>
en què cada valor es definirà segons la <span class="tabref"><a href="#table30"><span>taula</span></a></span>.
</p>
<div class="ioctable ">
<div class="titletable"><a name="table30"><span>Taula: </span></a>Definició d’un FPI</div>
<div class="table"><table class="inline">
	<tr class="row0">
		<th class="col0 leftalign"> Camp                </th><th class="col1 leftalign"> Valors possibles                                                                                                                                                                                           </th>
	</tr>
	<tr class="row1">
		<td class="col0 leftalign"> primer              </td><td class="col1"> Si l’estàndard no ha estat aprovat hi haurà un ’-&#039;, mentre que si ha estat aprovat per un organisme no estàndard tindrem un ’+&#039;. I en canvi, si ha estat aprovat per un organisme d’estàndards, hi haurà una referència. </td>
	</tr>
	<tr class="row2">
		<td class="col0"> Nom del responsable </td><td class="col1 leftalign"> Qui és l’organització o la persona responsable de definir l’estàndard.                                                                                                                                     </td>
	</tr>
	<tr class="row3">
		<td class="col0 leftalign"> Document descrit    </td><td class="col1 leftalign"> Conté un identificador únic del document descrit.                                                                                                                                                           </td>
	</tr>
	<tr class="row4">
		<td class="col0 leftalign"> Idioma  </td><td class="col1 leftalign"> El codi ISO de l’idioma en què està escrit el document.                                                                                                                                                                                                           </td>
	</tr>
</table></div>
</div>
<p>
Per exemple, aquesta seria una declaració correcta:
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc0">&lt;!DOCTYPE classe PUBLIC &quot;-//IOC//Classe 1.0//CA&quot; &quot;http://www.ioc.cat/classe.dtd&quot;&gt;</span></div></li></ol></pre>

<p>
Un exemple de DTD pública que es fa servir molt és la declaració d’<acronym title="HyperText Markup Language">HTML</acronym> 4.01:
</p>
<pre class="code html4strict"><ol><li class="li1"><div class="de1"><span class="sc0">&lt;!DOCTYPE HTML PUBLIC &quot;-//W3C//DTD HTML 4.01//EN&quot;</span></div></li><li class="li1"><div class="de1"><span class="sc0">&quot;http://www.w3.org/TR/html4/strict.dtd&quot;&gt;</span></div></li></ol></pre>

</div>

<h5><a id="regles_internes_en_declaracions_externes" >Regles internes en declaracions externes</a></h5>
<div class="level5">

<p>
Qualsevol de les definicions externes també pot contenir un apartat opcional que permet especificar-hi un subconjunt de regles internes. 
</p>

<p>

</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc0">&lt;!DOCTYPE nom SYSTEM &quot;fitxer.dtd&quot; [ regles ] &gt;</span></div></li><li class="li1"><div class="de1"><span class="sc0">&lt;!DOCTYPE classe PUBLIC &quot;-//IOC//Classe 1.0//CA&quot; &quot;fitxer.dtd&quot; [ regles ] &gt;</span></div></li></ol></pre>

<p>
Si no hi ha regles no cal especificar aquest apartat però també es pot deixar en blanc. Per tant, seria correcte definir la DTD d’aquesta manera:
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc0">&lt;!DOCTYPE alumnes SYSTEM &quot;alumnes.dtd&quot; [ ]&gt;</span></div></li></ol></pre>

<p>
Com d’aquesta:
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc0">&lt;!DOCTYPE alumnes SYSTEM &quot;alumnes.dtd&quot;&gt;</span></div></li></ol></pre>

</div>

<h3><a id="definicio_d_esquemes_amb_dtd" >Definició d&#039;esquemes amb DTD</a></h3>
<div class="level3">

<p>
La part més important d’un sistema de definició de vocabularis és definir com es fa per determinar l’ordre en què els elements poden aparèixer i quin contingut poden tenir, quins atributs poden tenir les etiquetes, etc.
</p>

<p>
Això, en DTD, es fa definint una sèrie de regles per mitjà d’un sistema d’etiquetes predefinit. A diferència del que passa en XML, en fer una definició en DTD les etiquetes estan definides. Per definir elements i atributs s’hauran de fer servir etiquetes concretes.
</p>

</div>

<h4><a id="elements" >Elements</a></h4>
<div class="level4">

<p>
De la mateixa manera que els elements són la base de l’XML, la definició d’aquests elements és la base de la definició de fitxers DTD. Per tant, sempre s’hauran de definir tots els elements que componen el vocabulari i a més especificar-ne el contingut (<span class="figref"><a href="#fig102"><span>figura</span></a></span>).
</p>
<div class="iocfigure"><a name="fig102"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

 Definició d’una DTD

</figcaption><img src="../media/asxm04u2_16.png" alt="" /></figure>
</div>
<p>
Per tant, és molt senzill definir elements amb DTD: simplement es defineix el nom de l’element i quin és el contingut.
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3">&lt;!ELEMENT nom <span class="br0">&#40;</span>#PCDATA<span class="br0">&#41;</span><span class="re2">&gt;</span></span></div></li></ol></pre>

<p>
Com en XML, els continguts poden ser dades o bé altres elements. Podem definir tres grans grups de maneres de definir els continguts en una DTD:
</p>
<ul>
<li class="level1"><div class="li"> Continguts genèrics</div>
</li>
<li class="level1"><div class="li"> Contingut d’elements</div>
</li>
<li class="level1"><div class="li"> Contingut barrejat</div>
</li>
</ul>

</div>

<h5><a id="continguts_generics" >Continguts genèrics</a></h5>
<div class="level5">

<p>
Hi ha tres continguts genèrics que es poden fer servir per definir elements: <code>ANY</code>, <code>EMPTY</code> i <code>#PCDATA</code> (vegeu la <span class="tabref"><a href="#table31"><span>taula</span></a></span>).
</p>
<div class="ioctable ">
<div class="titletable"><a name="table31"><span>Taula: </span></a>Continguts genèrics en una DTD</div>
<div class="table"><table class="inline">
	<tr class="row0">
		<th class="col0"> Valor </th><th class="col1 leftalign"> Significat                                         </th>
	</tr>
	<tr class="row1">
		<td class="col0 leftalign"> ANY     </td><td class="col1"> El contingut de l’element pot ser qualsevol cosa. </td>
	</tr>
	<tr class="row2">
		<td class="col0 leftalign"> EMPTY   </td><td class="col1 leftalign"> L’element no té contingut.                        </td>
	</tr>
	<tr class="row3">
		<td class="col0"> #PCDATA </td><td class="col1 leftalign"> El contingut de l’etiqueta poden ser dades.       </td>
	</tr>
</table></div>
</div>
<p>
Els elements que estiguin definits amb <code><strong>ANY</strong></code> poden contenir qualsevol cosa dins seu. Tant etiquetes, com dades, o fins i tot una barreja de les dues coses.
</p>

<p>
Si es defineix <code>persona</code> d’aquesta manera: 
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3">&lt;!ELEMENT persona ANY<span class="re2">&gt;</span></span></div></li></ol></pre>

<p>
validarà tant elements que continguin dades:
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;persona<span class="re2">&gt;</span></span></span>Frederic Pi<span class="sc3"><span class="re1">&lt;/persona<span class="re2">&gt;</span></span></span></div></li></ol></pre>

<p>
com elements que continguin altres elements: 
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;persona<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">    <span class="sc3"><span class="re1">&lt;nom<span class="re2">&gt;</span></span></span>Frederic<span class="sc3"><span class="re1">&lt;/nom<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">    <span class="sc3"><span class="re1">&lt;cognom<span class="re2">&gt;</span></span></span>Pi<span class="sc3"><span class="re1">&lt;/cognom<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;/persona<span class="re2">&gt;</span></span></span></div></li></ol></pre>

<p>
Per tant, el contingut definit amb <code>ANY</code> és molt potent però també fa que es perdi el control de les coses que es poden validar amb la DTD, ja que ho validarà pràcticament tot.
</p>

<p>
Els elements en XML a vegades no cal que tinguin cap valor per aportar alguna informació, ja que el nom de l’etiqueta pot tenir algun tipus de significat semàntic.
</p>

<p>
L’etiqueta <em>&lt;professor&gt;</em> de la línia 4 de l’exemple següent no necessita tenir cap contingut perquè està implícit que la persona a la qual s’assigni l’etiqueta serà un professor.
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;/persones<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">    <span class="sc3"><span class="re1">&lt;persona<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">        <span class="sc3"><span class="re1">&lt;nom<span class="re2">&gt;</span></span></span>Pere Martí<span class="sc3"><span class="re1">&lt;/nom<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">        <span class="sc3"><span class="re1">&lt;professor</span><span class="re2">/&gt;</span></span></div></li><li class="li1"><div class="de1">    <span class="sc3"><span class="re1">&lt;/persona<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">    <span class="sc3"><span class="re1">&lt;persona<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">        <span class="sc3"><span class="re1">&lt;nom<span class="re2">&gt;</span></span></span>Marcel Peris<span class="sc3"><span class="re1">&lt;/nom<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">    <span class="sc3"><span class="re1">&lt;/persona<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;/persones<span class="re2">&gt;</span></span></span></div></li></ol></pre>

<p>
Els continguts definits amb <code><strong>EMPTY</strong></code> estan pensats per a les etiquetes que no tindran cap contingut dins seu. Per tant, l’element <code>&lt;professor&gt;</code> de l’exemple anterior es definiria d’aquesta manera: 
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3">&lt;!ELEMENT professor EMPTY<span class="re2">&gt;</span></span></div></li></ol></pre>

<p>
Aquesta definició serveix tant per als elements que es defineixen fent servir el sistema d’una sola etiqueta…
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;professor</span><span class="re2">/&gt;</span></span></div></li></ol></pre>

<p>
com per als que defineixen les etiquetes d’obertura i tancament.
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;professor<span class="re2">&gt;</span></span><span class="re1">&lt;/professor<span class="re2">&gt;</span></span></span></div></li></ol></pre>

<p>
El contingut genèric <code><strong>#PCDATA</strong></code> (<em>parser character data</em>) segurament és el més usat per marcar que una etiqueta només té dades en el seu contingut.
</p>

<p>
Si partim de l’exemple següent: 
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;persona<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">    <span class="sc3"><span class="re1">&lt;nom<span class="re2">&gt;</span></span></span>Marcel<span class="sc3"><span class="re1">&lt;/nom<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">    <span class="sc3"><span class="re1">&lt;cognom<span class="re2">&gt;</span></span></span>Puigdevall<span class="sc3"><span class="re1">&lt;/nom<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;/persona<span class="re2">&gt;</span></span></span></div></li></ol></pre>

<p>
Es pot fer servir #PCDATA per definir el contingut dels elements <code>&lt;nom&gt;</code> i <code>&lt;cognom&gt;</code> perquè dins seu <strong>només tenen dades</strong>. 
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3">&lt;!ELEMENT nom <span class="br0">&#40;</span>#PCDATA<span class="br0">&#41;</span><span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1"><span class="sc3">&lt;!ELEMENT cognom <span class="br0">&#40;</span>#PCDATA<span class="br0">&#41;</span><span class="re2">&gt;</span></span></div></li></ol></pre>

<p>
Però no es pot fer servir, en canvi, per definir l’element <code>&lt;persona&gt;</code>, perquè dins seu no hi té només dades sinó que hi té els elements <code>&lt;nom&gt;</code> i <code>&lt;cognom&gt;</code>.
</p>

</div>

<h5><a id="contingut_d_elements" >Contingut d&#039;elements</a></h5>
<div class="level5">

<p>
Una de les situacions habituals en un document XML és que un element dins del seu contingut en tingui d’altres.
</p>

<p>
Tenim diverses possibilitats per definir el contingut d’elements dins d’una DTD:
</p>
<ul>
<li class="level1"><div class="li"> Seqüències d’elements</div>
</li>
<li class="level1"><div class="li"> Alternatives d’elements</div>
</li>
<li class="level1"><div class="li"> Modificadors</div>
</li>
</ul>

<p>
Si mirem l’exemple següent veurem que tenim un element <code>&lt;persona&gt;</code> que conté dos elements, <code>&lt;nom&gt;</code> i <code>&lt;cognom&gt;</code>. 
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;persona<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">    <span class="sc3"><span class="re1">&lt;nom<span class="re2">&gt;</span></span></span>Pere<span class="sc3"><span class="re1">&lt;/nom<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">    <span class="sc3"><span class="re1">&lt;cognom<span class="re2">&gt;</span></span></span>Martinez<span class="sc3"><span class="re1">&lt;/cognom<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;/persona<span class="re2">&gt;</span></span></span></div></li></ol></pre>

<p>
Per tant, l’element <code>&lt;persona&gt;</code> és un element que té com a contingut una <strong>seqüència d’altres elements</strong>. En una DTD es defineix aquesta situació definint explícitament quins són els fills de l’element, separant-los per comes.
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3">&lt;!ELEMENT persona <span class="br0">&#40;</span>nom,cognom<span class="br0">&#41;</span><span class="re2">&gt;</span></span></div></li></ol></pre>

<p>
Mai no s’ha d’oblidar que les seqüències tenen un ordre explícit i, per tant, només validaran si l’ordre en què es defineixen els elements és idèntic a l’ordre en què apareixeran en el document XML.
</p>

<p>
Per tant, si agafem com a referència el document següent:
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;menjar<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">   <span class="sc3"><span class="re1">&lt;dinar<span class="re2">&gt;</span></span></span>Arròs<span class="sc3"><span class="re1">&lt;/dinar<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">   <span class="sc3"><span class="re1">&lt;sopar<span class="re2">&gt;</span></span></span>Sopa<span class="sc3"><span class="re1">&lt;/sopar<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;/menjar<span class="re2">&gt;</span></span></span></div></li></ol></pre>

<p>
Si l’element <code>&lt;menjar&gt;</code> es defineix amb la seqüència <code>(&lt;dinar&gt;,&lt;sopar&gt;)</code>, aquest validarà, ja que els elements que conté estan en el mateix ordre que en el document.
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3">&lt;!ELEMENT menjar <span class="br0">&#40;</span>dinar,sopar<span class="br0">&#41;</span><span class="re2">&gt;</span></span></div></li></ol></pre>

<p>
Però no validaria, en canvi, si definíssim la seqüència al revés <code>(&lt;sopar&gt;,&lt;dinar&gt;)</code> perquè el processador esperarà que arribi primer un <code>&lt;sopar&gt;</code> i es trobarà un <code>&lt;dinar&gt;</code>.
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3">&lt;!ELEMENT menjar <span class="br0">&#40;</span>sopar,dinar<span class="br0">&#41;</span></span></div></li></ol></pre>

<p>
De vegades, en crear documents XML, succeeix que en funció del contingut que hi hagi en el document pot ser que hagin d’aparèixer unes etiquetes o unes altres.
</p>

<p>
Si dissenyéssim un XML per definir les fitxes de personal d’una empresa podríem tenir una etiqueta <code>&lt;personal&gt;</code> i després definir el càrrec amb una altra etiqueta. El president es podria definir així:
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;personal<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">   <span class="sc3"><span class="re1">&lt;president<span class="re2">&gt;</span></span></span>Josep Maria Flaviol<span class="sc3"><span class="re1">&lt;/president<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;/personal<span class="re2">&gt;</span></span></span></div></li></ol></pre>

<p>
I un dels treballadors així:
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;personal<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">    <span class="sc3"><span class="re1">&lt;treballador<span class="re2">&gt;</span></span></span>Pere Vila<span class="sc3"><span class="re1">&lt;/treballador<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;/personal<span class="re2">&gt;</span></span></span></div></li></ol></pre>

<p>
Podem fer que una DTD validi tots dos casos fent servir <strong>l’operador d’alternativa (<code>|</code>)</strong>. 
</p>
<div class="iocimportant"><div class="ioccontent">
<p>
L’operador alternativa (<code>|</code>) permet que el processador pugui triar entre una de les opcions que se li ofereixen per validar un document XML.
</p>
</div></div>
<p>
Per tant, podem validar els dos documents XML anteriors definint <code>&lt;personal&gt;</code> d’aquesta manera:
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3">&lt;!ELEMENT personal <span class="br0">&#40;</span>treballador|president<span class="br0">&#41;</span><span class="re2">&gt;</span></span></div></li></ol></pre>

<p>
No hi ha cap limitació definida per posar alternatives. Per tant, en podem posar tantes com ens facin falta.
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3">&lt;!ELEMENT personal <span class="br0">&#40;</span>treballador|president|informàtic|gerent<span class="br0">&#41;</span><span class="re2">&gt;</span></span></div></li></ol></pre>

<p>
També es permet mesclar la definició amb <code>EMPTY</code> per indicar que el valor pot aparèixer o no:
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3">&lt;!ELEMENT alumne <span class="br0">&#40;</span>delegat|EMPTY<span class="br0">&#41;</span><span class="re2">&gt;</span></span></div></li></ol></pre>
<div class="iocreference"><div class="ioccontent">
<p>
Combinar alternatives amb <code>PCDATA</code> és més complex. Vegeu l’apartat “Problemes en barrejar etiquetes i #PCDATA”.
</p>
</div></div>
<p>
No hi ha res que impedeixi barrejar les seqüències i les alternatives d’elements a l’hora de definir un element amb DTD. Per tant, es poden fer les combinacions que facin falta entre seqüències i alternatives.
</p>

<p>
Si tenim un XML que defineix l’etiqueta <code>&lt;cercle&gt;</code> a partir de les seves coordenades del centre i del radi o el diàmetre podem definir l’element combinant les seqüències amb una alternativa. L’etiqueta <code>&lt;cercle&gt;</code> contindrà sempre dins seu les etiquetes <code>&lt;x&gt;</code>,<code>&lt;y&gt;</code> i després pot contenir també <code>&lt;radi&gt;</code> o <code>&lt;diàmetre&gt;</code>:
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3">&lt;!ELEMENT cercle <span class="br0">&#40;</span>x,y,<span class="br0">&#40;</span>radi|diametre<span class="br0">&#41;</span><span class="br0">&#41;</span><span class="re2">&gt;</span></span></div></li></ol></pre>

<p>
Combinar seqüències i alternatives permet saltar-se les restriccions d’ordre de les seqüències. L’exemple següent ens permet definir una persona a partir de nom i cognom en qualsevol ordre:
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3">&lt;!ELEMENT persona <span class="br0">&#40;</span><span class="br0">&#40;</span>cognom,nom<span class="br0">&#41;</span>|<span class="br0">&#40;</span>nom,cognom<span class="br0">&#41;</span><span class="br0">&#41;</span><span class="re2">&gt;</span></span></div></li></ol></pre>

<p>
En els casos en què les etiquetes es repeteixin un nombre indeterminat de vegades serà impossible especificar-les totes en la definició de l’element. <strong>Els modificadors</strong> serveixen per especificar quantes instàncies dels elements fills hi pot haver en un element (<span class="tabref"><a href="#table32"><span>taula</span></a></span>).
</p>
<div class="ioctable ">
<div class="titletable"><a name="table32"><span>Taula: </span></a>Modificadors acceptats en el contingut dels elements</div>
<div class="table"><table class="inline">
	<tr class="row0">
		<th class="col0"> Modificador </th><th class="col1 leftalign"> Significat                                                            </th>
	</tr>
	<tr class="row1">
		<td class="col0 leftalign"> ?           </td><td class="col1 leftalign"> Indica que l’element tant pot ser que hi sigui com no.           </td>
	</tr>
	<tr class="row2">
		<td class="col0 leftalign"> +           </td><td class="col1 leftalign"> Es fa servir per indicar que l’element ha de sortir una vegada o més.  </td>
	</tr>
	<tr class="row3">
		<td class="col0 leftalign"> *  </td><td class="col1 rightalign">  Indica que pot ser que l’element estigui repetit un nombre indeterminat de vegades, o bé no ser-hi. </td>
	</tr>
</table></div>
</div>
<p>
Per tant, si volem especificar que una persona pot ser identificada per mitjà del nom i un o més cognoms podríem definir l’element <code>&lt;persona&gt;</code> d’aquesta manera:
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3">&lt;!ELEMENT persona <span class="br0">&#40;</span>nom,cognom+<span class="br0">&#41;</span><span class="re2">&gt;</span></span></div></li></ol></pre>

<p>

</p>

<p>
Com que aquesta expressió indica que cognom ha de sortir una vegada, podrà validar tant aquest exemple:
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;persona<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">    <span class="sc3"><span class="re1">&lt;nom<span class="re2">&gt;</span></span></span>Joan<span class="sc3"><span class="re1">&lt;/nom<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">    <span class="sc3"><span class="re1">&lt;cognom<span class="re2">&gt;</span></span></span>Puig<span class="sc3"><span class="re1">&lt;/cognom<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;/persona<span class="re2">&gt;</span></span></span></div></li></ol></pre>

<p>
 com aquest altre:
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;persona<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">    <span class="sc3"><span class="re1">&lt;nom<span class="re2">&gt;</span></span></span>Joan<span class="sc3"><span class="re1">&lt;/nom<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">    <span class="sc3"><span class="re1">&lt;cognom<span class="re2">&gt;</span></span></span>Puig<span class="sc3"><span class="re1">&lt;/cognom<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">    <span class="sc3"><span class="re1">&lt;cognom<span class="re2">&gt;</span></span></span>Garcia<span class="sc3"><span class="re1">&lt;/cognom<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;/persona<span class="re2">&gt;</span></span></span></div></li></ol></pre>

<p>
És evident que aquesta no és la millor manera de definir el que volíem, ja que definit d’aquesta manera també ens acceptarà persones amb 3 cognoms, 4 cognoms, o més.
</p>

<p>
Per tant, el modificador ideal per forçar que només hi pugui haver un o dos cognoms seria <code>?</code>, emprant-lo de la manera següent: 
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3">&lt;!ELEMENT persona <span class="br0">&#40;</span>nom, cognom, cognom?<span class="br0">&#41;</span><span class="re2">&gt;</span></span></div></li></ol></pre>

<p>
El modificador <code>*</code> aplicat al mateix exemple ens permetria acceptar que alguna persona no tingués cognoms o que en tingui un nombre indeterminat:
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3">&lt;!ELEMENT persona <span class="br0">&#40;</span>nom, cognom*<span class="br0">&#41;</span><span class="re2">&gt;</span></span></div></li></ol></pre>

<p>
Els modificadors aplicats darrere d’un parèntesi impliquen aplicar-los a tots els elements de dintre dels parèntesis:
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3">&lt;!ELEMENT escriptor <span class="br0">&#40;</span><span class="br0">&#40;</span>llibre,data<span class="br0">&#41;</span>*|articles+<span class="br0">&#41;</span> <span class="re2">&gt;</span></span></div></li></ol></pre>

</div>

<h5><a id="contingut_barrejat" >Contingut barrejat</a></h5>
<div class="level5">

<p>
El contingut barrejat es va pensar per poder definir continguts que continguin text que es va intercalant amb d’altres elements, com per exemple:
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;carta<span class="re2">&gt;</span></span></span>Benvolgut <span class="sc3"><span class="re1">&lt;empresa<span class="re2">&gt;</span></span></span>Ferros Puig<span class="sc3"><span class="re1">&lt;/empresa<span class="re2">&gt;</span></span></span>:</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">Sr. <span class="sc3"><span class="re1">&lt;director<span class="re2">&gt;</span></span></span>Manel Garcia<span class="sc3"><span class="re1">&lt;/director<span class="re2">&gt;</span></span></span>, li envio aquesta carta per comunicar-li que li hem enviat la seva comanda <span class="sc3"><span class="re1">&lt;comanda<span class="re2">&gt;</span></span></span>145<span class="sc3"><span class="re1">&lt;/comanda<span class="re2">&gt;</span></span></span> a l'adreça que ens va proporcionar.</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">  Atentament, <span class="sc3"><span class="re1">&lt;empresa<span class="re2">&gt;</span></span></span>Ferreteria, SA<span class="sc3"><span class="re1">&lt;/empresa<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;/carta<span class="re2">&gt;</span></span></span></div></li></ol></pre>

<p>
El <strong>contingut barrejat</strong> es defineix definint el tipus #PCDATA (sempre en primer lloc) i després s’afegeixen els elements amb l’ajuda de l’operador d’alternativa, <code>|</code>,  i s’acaba tot el grup amb el modificador <code>*</code>.
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3">&lt;!ELEMENT carta <span class="br0">&#40;</span>#PCDATA|empresa|director|comanda<span class="br0">&#41;</span>*<span class="re2">&gt;</span></span></div></li></ol></pre>

<p>
S’ha de tenir en compte que aquest contingut només serveix per controlar que els elements hi puguin ser però que no hi ha cap manera de controlar en quin ordre apareixeran els diferents elements. 
</p>

<p>
Per tant, podem definir una DTD que validi l’exemple presentat al principi d’aquest apartat de la manera següent:
</p>
<pre class="code dtd"><ol><li class="li1"><div class="de1">&lt;!ELEMENT carta (#PCDATA|empresa|director )*&gt;</div></li><li class="li1"><div class="de1">&lt;!ELEMENT empresa (#PCDATA)&gt;</div></li><li class="li1"><div class="de1">&lt;!ELEMENT director(#PCDATA)&gt;</div></li></ol></pre>

</div>

<h4><a id="atributs_en_dtd" >Atributs en DTD</a></h4>
<div class="level4">

<p>
En les DTD s’han d’especificar quins són els atributs que es faran servir en cada una de les etiquetes explícitament. La declaració d’atributs es fa amb l’etiqueta especial <code>ATTLIST</code>, que es defineix tal com es veu en la <span class="figref"><a href="#fig103"><span>figura</span></a></span>.
</p>
<div class="iocfigure"><a name="fig103"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

 Definició d’un atribut en DTD

</figcaption><img src="../media/asxm04u2_17.png" alt="" /></figure>
</div>
<p>
Els dos primers valors de la definició de l’atribut són el <strong>nom de l’etiqueta</strong> i el <strong>nom de l’atribut</strong>, ja que en definir un atribut sempre s’especifica a quina etiqueta pertany. Una de les crítiques que s’han fet a les DTD ha estat que no s’hi poden fer atributs genèrics. Si algú vol definir un atribut que sigui compartit per tots els elements del seu vocabulari ha d’anar especificant l’atribut per a tots i cada un dels elements. 
</p>

<p>
Per definir un atribut anomenat <code>nom</code> que pertanyi a l’element <code>&lt;persona&gt;</code> ho podem fer d’aquesta manera:
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3">&lt;!ATTLIST persona nom CDATA #IMPLIED<span class="re2">&gt;</span></span></div></li></ol></pre>

</div>

<h5><a id="especificar_multiples_atributs" >Especificar múltiples atributs</a></h5>
<div class="level5">

<p>
Si un element necessita diversos atributs haurem d’especificar tots els atributs en diverses línies <code>ATTLIST</code>. Per exemple, definim els atributs <code>nom</code> i <code>cognoms</code> de l’element <code>&lt;persona&gt;</code> d’aquesta manera:
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3">&lt;!ATTLIST persona nom CDATA #REQUIRED<span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1"><span class="sc3">&lt;!ATTLIST persona cognom CDATA #REQUIRED<span class="re2">&gt;</span></span></div></li></ol></pre>

<p>
O bé es pot fer la definició dels dos atributs amb una sola referència <code>ATTLIST</code>:
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3">&lt;!ATTLIST persona nom    CDATA #REQUIRED</span></div></li><li class="li1"><div class="de1"><span class="sc3">                  cognom CDATA #REQUIRED<span class="re2">&gt;</span></span></div></li></ol></pre>

<p>
Les dues declaracions anteriors ens permetrien validar els atributs de l’element <code>&lt;persona&gt;</code> d’aquest exemple:
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;persona</span> <span class="re0">nom</span>=<span class="st0">&quot;Frederic&quot;</span> <span class="re0">cognom</span>=<span class="st0">&quot;Pi&quot;</span> <span class="re2">/&gt;</span></span></div></li></ol></pre>

</div>

<h5><a id="atributs_d_attlist" >Atributs d&#039;ATTLIST</a></h5>
<div class="level5">

<p>
Els elements <code>ATTLIST</code> a part de tipus de dades també poden tenir atributs que permeten definir característiques sobre els atributs. Aquests atributs es poden veure en la <span class="tabref"><a href="#table34"><span>taula</span></a></span>.
</p>
<div class="ioctable ">
<div class="titletable"><a name="table34"><span>Taula: </span></a>Atributs d’ATTLIST</div>
<div class="table"><table class="inline">
	<tr class="row0">
		<th class="col0 leftalign"> Atribut  </th><th class="col1 leftalign"> Significat                                                                                                        </th>
	</tr>
	<tr class="row1">
		<td class="col0 leftalign"> <code>#IMPLIED</code>  </td><td class="col1 leftalign"> L’atribut és opcional. Els elements el poden tenir o no.                                                           </td>
	</tr>
	<tr class="row2">
		<td class="col0"> <code>#REQUIRED</code> </td><td class="col1 leftalign"> L’atribut és obligatori. L’element l’ha de tenir definit o no validarà.                                            </td>
	</tr>
	<tr class="row3">
		<td class="col0 leftalign"> <code>#FIXED</code>    </td><td class="col1"> Es fa servir per definir atributs que tenen valors constants i immutables. S’ha d’especificar, ja que és permanent. </td>
	</tr>
	<tr class="row4">
		<td class="col0 leftalign"> <code>#DEFAULT</code>  </td><td class="col1 leftalign"> Permet especificar valors per defecte en els atributs.                                                                                                                   </td>
	</tr>
</table></div>
<div class="foottable"> </div></div>
<p>
Per tant, si es defineix un atribut d’aquesta manera: 
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3">&lt;!ATTLIST equip posicio ID #REQUIRED<span class="re2">&gt;</span></span></div></li></ol></pre>

<p>
s’està obligant que quan es defineixi l’element <code>&lt;equip&gt;</code> en un document XML s’especifiqui obligatòriament l’atribut <code>posicio</code> i que a més el seu valor no es repeteixi en el document, ja que és de tipus <code>ID</code>.
</p>

<p>
En canvi, definint l’atribut <code>DNI</code> de <code>&lt;persona&gt;</code> amb <code>#IMPLIED</code> es permetrà que en crear el document XML l’atribut <code>DNI</code> hi pugui ser o no.
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3">&lt;!ATTLIST persona dni NMTOKEN #IMPLIED<span class="re2">&gt;</span></span></div></li></ol></pre>

<p>
En definir un atribut com a <code>#FIXED</code> o com a <code>#DEFAULT</code> se li ha d’especificar el valor. Aquest valor s’especifica a continuació de l’atribut i ha d’anar entre cometes:
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3">&lt;!ATTLIST document versio CDATA #FIXED <span class="st0">&quot;1.0&quot;</span><span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1"><span class="sc3">&lt;!ATTLIST document codificacio NMTOKEN #DEFAULT <span class="st0">&quot;UTF-8&quot;</span><span class="re2">&gt;</span></span></div></li></ol></pre>

<p>
Els atributs de tipus <code>#FIXED</code> han de tenir el valor especificat en la definició i aquest no es pot canviar, mentre que els valors definits amb <code>#DEFAULT</code> sí que poden ser canviats.
</p>

</div>

<h5><a id="tipus_de_dades" >Tipus de dades</a></h5>
<div class="level5">

<p>
El tercer paràmetre d’una declaració ATTLIST serveix per definir quins tipus de dades pot tenir l’atribut. Els atributs en DTD no fan servir els tipus de dades dels elements sinó que en defineixen de propis. Els tipus de dades dels atributs es poden veure a la <span class="tabref"><a href="#table33"><span>taula</span></a></span>.
</p>
<div class="ioctable ">
<div class="titletable"><a name="table33"><span>Taula: </span></a>Tipus de dades dels atributs d’una DTD</div>
<div class="table"><table class="inline">
	<tr class="row0">
		<th class="col0 leftalign"> Tipus              </th><th class="col1 leftalign"> Significat                                                                                                           </th>
	</tr>
	<tr class="row1">
		<td class="col0 leftalign"> CDATA              </td><td class="col1"> Pot contenir qualsevol cadena de caràcters acceptable. Es pot fer servir per a preus, <acronym title="Uniform Resource Locator">URL</acronym>, adreces electròniques, etc. </td>
	</tr>
	<tr class="row2">
		<td class="col0 leftalign"> Enumeracions       </td><td class="col1 leftalign"> Es fan servir per definir que l’atribut ha de tenir un dels valors especificats.                                      </td>
	</tr>
	<tr class="row3">
		<td class="col0 leftalign"> ID                 </td><td class="col1 leftalign"> L’atribut es podrà fer servir com a identificador d’un element. El seu valor serà únic.                                 </td>
	</tr>
	<tr class="row4">
		<td class="col0 leftalign"> IDREF o IDREFS     </td><td class="col1 leftalign"> El valor són referències a un ID que ha d’existir. El plural és per definir que és una llista.                        </td>
	</tr>
	<tr class="row5">
		<td class="col0 leftalign"> ENTITY o ENTITIES  </td><td class="col1 leftalign"> Les entitats permeten definir constants per al document i, per tant, el valor de l’atribut ha de ser una entitat.          </td>
	</tr>
	<tr class="row6">
		<td class="col0"> NMTOKEN o NMTOKENS </td><td class="col1 leftalign"> Especifiquen cadenes de caràcters que només tinguin caràcters permesos per XML. Per tant, no es permeten els espais.   </td>
	</tr>
	<tr class="row7">
		<td class="col0 leftalign"> NOTATION           </td><td class="col1 leftalign"> Permet que l’atribut sigui d’una notació declarada anteriorment.                                                                                                                     </td>
	</tr>
</table></div>
</div>
</div>

<h5><a id="cdata" >CDATA</a></h5>
<div class="level5">

<p>
El tipus <code>CDATA</code> és un tipus de dades pràcticament idèntic al tipus <code>#PCDATA</code> de les etiquetes. En un <code>CDATA</code> es pot posar qualsevol dada en format de text tant si té espais com si no en té.
</p>

<p>
Per tant, la declaració següent:
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3">&lt;!ATTLIST empresa nom CDATA #REQUIRED<span class="re2">&gt;</span></span></div></li></ol></pre>

<p>
permetria definir etiquetes <code>empresa</code> com aquestes:
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;empresa</span> <span class="re0">nom</span>=<span class="st0">&quot;Microsoft Corporation&quot;</span><span class="re2">/&gt;</span></span></div></li><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;empresa</span> <span class="re0">nom</span>=<span class="st0">&quot;6tem&quot;</span><span class="re2">/&gt;</span></span></div></li></ol></pre>

<p>
És important recordar que els nombres també validarien amb un tipus <code>CDATA</code> perquè interpretats en forma de text no deixen de ser simplement caràcters:
</p>

<p>

</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;empresa</span> <span class="re0">nom</span>=<span class="st0">&quot;12&quot;</span><span class="re2">/&gt;</span></span></div></li></ol></pre>

</div>

<h5><a id="enumeracions" >Enumeracions</a></h5>
<div class="level5">

<p>
Els atributs també poden ser especificats definint-hi quins poden ser els valors correctes per a un atribut. Aquests valors s’especifiquen literalment amb l’operador de selecció:
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3">&lt;!ATTLIST mòdul inici <span class="br0">&#40;</span>setembre|febrer<span class="br0">&#41;</span> #IMPLIED<span class="re2">&gt;</span></span></div></li></ol></pre>

<p>
Per tant, segons la definició, l’atribut <code>inici</code> ha d’existir i només pot tenir els valors “setembre” o “febrer”.
</p>

<p>
Es poden posar múltiples opcions en una enumeració. Per exemple, podem comprovar que el valor de l’atribut sigui un nombre entre 1 i 12 d’aquesta manera:
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3">&lt;!ATTLIST mòdul nombre<span class="br0">&#40;</span>1|2|3|4|5|6|7|8|9|10|11|12<span class="br0">&#41;</span><span class="re2">&gt;</span></span></div></li></ol></pre>

</div>

<h5><a id="id" >ID</a></h5>
<div class="level5">

<p>
El tipus de dades <code>ID</code> serveix per definir atributs que es puguin usar com a identificadors d’un element dins del document. Cal tenir en compte que:
</p>
<ul>
<li class="level1"><div class="li"> Els valors assignats no es poden repetir dins del document. Això els fa ideals per fer servir el tipus <code>ID</code> per identificar únicament els elements d’un document.</div>
</li>
<li class="level1"><div class="li"> Els valors han de començar per una lletra o un subratllat.</div>
</li>
</ul>

<p>
Els valors de l’atribut <code>posicio</code> de la definició següent no es podran repetir dins del mateix document:
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3">&lt;!ATTLIST equip posicio ID #REQUIRED<span class="re2">&gt;</span></span></div></li></ol></pre>

<p>
Per tant, si es fes servir la declaració anterior per validar aquest document es generaria un error de validació en l’atribut <code>posició</code>, ja que es repeteix el valor “primer” en els dos elements.
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;classificaci</span>ó<span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1">  <span class="sc3"><span class="re1">&lt;equip</span> posició=<span class="st0">&quot;primer&quot;</span><span class="re2">&gt;</span></span>F.C.Barcelona<span class="sc3"><span class="re1">&lt;/equip<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">  <span class="sc3"><span class="re1">&lt;equip</span> posició=<span class="st0">&quot;primer&quot;</span><span class="re2">&gt;</span></span>Reial Madrid<span class="sc3"><span class="re1">&lt;/equip<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;/classificaci</span>ó<span class="re2">&gt;</span></span></div></li></ol></pre>

<p>
Perquè validi aquest document cal assegurar-se que els atributs <code>ID</code> no tinguin el mateix valor:
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;classificaci</span>ó<span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1">  <span class="sc3"><span class="re1">&lt;equip</span> posició=<span class="st0">&quot;primer&quot;</span><span class="re2">&gt;</span></span>F.C.Barcelona<span class="sc3"><span class="re1">&lt;/equip<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">  <span class="sc3"><span class="re1">&lt;equip</span> posició=<span class="st0">&quot;segon&quot;</span><span class="re2">&gt;</span></span>Reial Madrid<span class="sc3"><span class="re1">&lt;/equip<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;/classificaci</span>ó<span class="re2">&gt;</span></span></div></li></ol></pre>

</div>

<h5><a id="idref_idrefs" >IDREF / IDREFS</a></h5>
<div class="level5">

<p>
Els valors <code>IDREF</code> i <code>IDREFS</code> es fan servir per definir valors d’atributs que fan referència a elements que tinguin un valor de tipus <code>ID</code>. Només tenen sentit en vocabularis que tinguin atributs amb valor <code>ID</code>.
</p>

<p>
IDREF es fa servir per fer referència a un valor <code>ID</code>:
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3">&lt;!ATTLIST recepta id ID #REQUIRED<span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1"><span class="sc3">&lt;!ATTLIST ingredient ref IDREF #REQUIRED</span></div></li></ol></pre>

<p>
Amb la declaració que s’acaba d’especificar es pot validar un document com el següent:
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;llibre-cuina<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">    <span class="sc3"><span class="re1">&lt;receptes<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">        <span class="sc3"><span class="re1">&lt;recepta</span> <span class="re0">id</span>=<span class="st0">&quot;recepta1&quot;</span><span class="re2">&gt;</span></span>Patates fregides<span class="sc3"><span class="re1">&lt;/recepta<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">        <span class="sc3"><span class="re1">&lt;recepta</span> <span class="re0">id</span>=<span class="st0">&quot;recepta2&quot;</span><span class="re2">&gt;</span></span>Patates bullides<span class="sc3"><span class="re1">&lt;/recepta<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">    <span class="sc3"><span class="re1">&lt;/receptes<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">    <span class="sc3"><span class="re1">&lt;ingredients<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">        <span class="sc3"><span class="re1">&lt;ingredient</span> <span class="re0">ref</span>=<span class="st0">&quot;recepta1&quot;</span><span class="re2">&gt;</span></span>Oli<span class="sc3"><span class="re1">&lt;/ingredient<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">        <span class="sc3"><span class="re1">&lt;ingredient</span> <span class="re0">ref</span>=<span class="st0">&quot;recepta2&quot;</span><span class="re2">&gt;</span></span>Aigua<span class="sc3"><span class="re1">&lt;/ingredient<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">    <span class="sc3"><span class="re1">&lt;/ingredients<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;/llibre-cuina<span class="re2">&gt;</span></span></span></div></li></ol></pre>

<p>
<code>IDREFS</code> permet especificar una llista de valors <code>ID</code> en el mateix atribut. Per exemple, si es defineix l’atribut <em>ingredient</em> amb <code>IDREFS</code>:
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3">&lt;!ATTLIST ingredient ref IDREFS #REQUIRED<span class="re2">&gt;</span></span></div></li></ol></pre>

<p>
Es podria posar una llista d<code>‘ID</code> com a valor de l’atribut:
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;ingredient</span> <span class="re0">ref</span>=<span class="st0">&quot;recepta1 recepta2&quot;</span><span class="re2">&gt;</span></span>Patates<span class="sc3"><span class="re1">&lt;/ingredient<span class="re2">&gt;</span></span></span></div></li></ol></pre>

</div>

<h5><a id="nmtoken_nmtokens" >NMTOKEN / NMTOKENS</a></h5>
<div class="level5">

<p>
Els tipus <code>NMTOKEN</code> permeten especificar que els atributs poden tenir qualsevol caràcter acceptat per l’XML.
</p>
<div class="iocreference"><div class="ioccontent">
<p>
Vegeu l’apartat “Noms vàlids XML” en aquesta unitat. 
</p>
</div></div>
<p>
Així, la declaració següent:
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3">&lt;!ATTLIST home naixement NMTOKEN #REQUIRED<span class="re2">&gt;</span></span></div></li></ol></pre>

<p>
permetrà validar aquest element:
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;home</span> <span class="re0">naixement</span>=<span class="st0">&quot;1970&quot;</span> <span class="re2">/&gt;</span></span></div></li></ol></pre>

<p>
Però no ho farà amb aquest altre, perquè té un espai:
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;home</span> <span class="re0">naixement</span>=<span class="st0">&quot;segle XX&quot;</span> <span class="re2">/&gt;</span></span></div></li></ol></pre>

<p>
El valor en plural <code>NMTOKENS</code> permet especificar una llista de valors en comptes d’un de sol:
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;coordenades</span> <span class="re0">posicio</span>=<span class="st0">&quot;x y&quot;</span><span class="re2">/&gt;</span></span></div></li></ol></pre>

</div>

<h5><a id="notation" >NOTATION</a></h5>
<div class="level5">

<p>
Es fa servir per permetre valors que han estat declarats com a <em>notation</em> amb l’etiqueta <code>&lt;!NOTATION</code>. Es fa servir per especificar dades no-XML.
</p>

<p>
Sovint es fa servir per declarar tipus MIME:
</p>
<pre class="code XML"><ol><li class="li1"><div class="de1"><span class="sc3">&lt;!NOTATION GIF SYSTEM <span class="st0">&quot;image/gif&quot;</span><span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1"><span class="sc3">&lt;!NOTATION JPG SYSTEM <span class="st0">&quot;image/jpeg&quot;</span><span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1"><span class="sc3">&lt;!NOTATION PNG SYSTEM <span class="st0">&quot;image/png&quot;</span><span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1"><span class="sc3">&lt;!ATTLIST persona</span></div></li><li class="li1"><div class="de1"><span class="sc3">  photo_type NOTATION <span class="br0">&#40;</span>GIF | JPG | PNG<span class="br0">&#41;</span> #IMPLIED<span class="re2">&gt;</span></span></div></li></ol></pre>

</div>

<h5><a id="entity_entities" >ENTITY / ENTITIES</a></h5>
<div class="level5">

<p>
Indica que el valor és una referència a un valor extern que no s’ha de processar. En general solen contenir valors binaris externs.
</p>

<p>
Fer servir <code>ENTITY</code> implicarà haver declarat l’entitat amb <code>&lt;!ENTITY</code>:
</p>
<pre class="code">&lt;!ATTLIST persona foto ENTITY #IMPLIED
&lt;!ENTITY pere SYSTEM &quot;Pere.jpg&quot;&gt;</pre>

<p>
Permetrà que es defineixi l’atribut <code>persona</code> amb el valor de l’entitat i que automàticament sigui associat a la imatge:
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;persona</span> <span class="re0">nom</span>=<span class="st0">&quot;pere&quot;</span> <span class="re2">/&gt;</span></span></div></li></ol></pre>

</div>

<h4><a id="altres" >Altres</a></h4>
<div class="level4">

<p>
Les etiquetes <code>&lt;!ELEMENT&gt;</code> i <code>&lt;!ATTLIST&gt;</code> no són les úniques que es poden fer servir per declarar DTD. N’hi ha algunes més que en determinats casos es poden fer servir per crear una DTD.
</p>

<p>
En la <span class="tabref"><a href="#table35"><span>taula</span></a></span> se’n poden veure algunes, i també un breu resum de què és el que fan.
</p>
<div class="ioctable ">
<div class="titletable"><a name="table35"><span>Taula: </span></a>Altres etiquetes possibles en una DTD</div>
<div class="table"><table class="inline">
	<tr class="row0">
		<th class="col0 leftalign"> Etiqueta    </th><th class="col1"> Es fa servir per … </th>
	</tr>
	<tr class="row1">
		<td class="col0 leftalign"> &lt;!ENTITY&gt;   </td><td class="col1 leftalign"> Definir referències a fitxers externs que no s’han de processar.  </td>
	</tr>
	<tr class="row2">
		<td class="col0"> &lt;!NOTATION&gt; </td><td class="col1"> Incloure dades que no siguin XML en el document. </td>
	</tr>
	<tr class="row3">
		<td class="col0 leftalign"> &lt;!INCLUDE&gt;  </td><td class="col1"> Fer que parts de la DTD s’afegeixin al processament.</td>
	</tr>
	<tr class="row4">
		<td class="col0 leftalign"> &lt;!IGNORE&gt;   </td><td class="col1"> Fer que parts de la DTD siguin ignorades pel processador. </td>
	</tr>
</table></div>
</div>
</div>

<h3><a id="limitacions" >Limitacions</a></h3>
<div class="level3">

<p>
Una de les crítiques que s’ha fet a l’ús de DTD per definir llenguatges XML és que no està basat en XML. La DTD no segueix la manera de definir els documents d’XML i, per tant, per fer-lo servir, <strong>cal aprendre un nou llenguatge</strong>. Si la DTD estigués basada en XML no caldria conèixer de quina manera s’han de definir els elements, marcar les repeticions, els elements buits, etc., ja que es faria amb elements.
</p>

<p>
Tot i així, el fet que DTD no sigui un llenguatge XML és un problema menor si es tenen en compte les altres limitacions que té:
</p>
<ul>
<li class="level1"><div class="li"> No comprova els tipus</div>
</li>
<li class="level1"><div class="li"> Presenta problemes en barrejar etiquetes i <code>#PCDATA</code></div>
</li>
<li class="level1"><div class="li"> Només accepta expressions deterministes</div>
</li>
</ul>

</div>

<h4><a id="la_dtd_no_comprova_els_tipus" >La DTD no comprova els tipus</a></h4>
<div class="level4">

<p>
Un dels problemes més importants que ens trobarem a l’hora d’usar DTD per definir el nostre vocabulari és que no té cap manera de comprovar els tipus de dades que contenen els elements. Sovint els noms dels elements ja determinen que el contingut que hi haurà serà d’un tipus determinat (un nombre, una cadena de caràcters, una data, etc.) però la DTD no deixa que se li especifiqui quin tipus de dades s’hi vol posar.
</p>

<p>
Per tant, si algú emplena amb qualsevol cosa un element que es digui <code>&lt;dia&gt;</code>, el document serà vàlid a pesar que el contingut no sigui una data:
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;dia<span class="re2">&gt;</span></span></span>xocolata<span class="sc3"><span class="re1">&lt;/dia<span class="re2">&gt;</span></span></span></div></li></ol></pre>

<p>
En no poder comprovar el tipus del contingut, una limitació important afegida és que no hi ha cap manera de poder posar-hi restriccions. Per exemple, no podem definir que volem que una data estigui entre els anys 1900 i 2012.
</p>

</div>

<h4><a id="problemes_en_barrejar_etiquetes_i_pcdata" >Problemes en barrejar etiquetes i #PCDATA</a></h4>
<div class="level4">

<p>
Una limitació més complexa de veure és que no es poden barrejar etiquetes i <code>#PCDATA</code> en expressions si el resultat no és el que es coneix com a “<strong>contingut barrejat</strong>”.
</p>
<div class="iocreference"><div class="ioccontent">
<p>
Vegeu l’apartat “Contingut barrejat” d’aquesta unitat.
</p>
</div></div>
<p>
Un exemple d’això consistiria a fer una definició d’un exercici com un enunciat de text, però que hi pugui haver diversos apartats que també continguin text. 
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;exercici<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">   Llegiu el text &quot;Validació de documents XML&quot; i responeu les preguntes següents:</div></li><li class="li1"><div class="de1">   <span class="sc3"><span class="re1">&lt;apartat</span> <span class="re0">numero</span>=<span class="st0">&quot;1&quot;</span><span class="re2">&gt;</span></span>Què volen dir les sigles XML?<span class="sc3"><span class="re1">&lt;/apartat<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">   <span class="sc3"><span class="re1">&lt;apartat</span> <span class="re0">numero</span>=<span class="st0">&quot;2&quot;</span><span class="re2">&gt;</span></span>Què és un DTD?<span class="sc3"><span class="re1">&lt;/apartat<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;/exercici<span class="re2">&gt;</span></span></span></div></li></ol></pre>

<p>
El més senzill seria mesclar un <code>#PCDATA</code> i l’etiqueta <code>&lt;apartat&gt;</code>, però és incorrecte:
</p>
<pre class="code dtd"><ol><li class="li1"><div class="de1">&lt;!ELEMENT exercici (#PCDATA | apartat*)&gt;</div></li></ol></pre>

<p>
A més, no es permet que es facin declaracions duplicades d’elements, o sigui que tampoc no ho podem arreglar amb:
</p>
<pre class="code dtd"><ol><li class="li1"><div class="de1">&lt;!ELEMENT exercici(#PCDATA)&gt;</div></li><li class="li1"><div class="de1">&lt;!ELEMENT exercici(apartat*)&gt;</div></li></ol></pre>

<p>
L’única manera de combinar-ho seria fer servir la fórmula del <code>contingut barrejat</code>:
</p>
<pre class="code dtd"><ol><li class="li1"><div class="de1">&lt;!ELEMENT exercici(#PCDATA|apartat)*&gt;</div></li></ol></pre>

</div>

<h4><a id="nomes_accepta_expressions_deterministes" >Només accepta expressions deterministes</a></h4>
<div class="level4">

<p>
Una altra de les limitacions de les DTD és que obliga que les expressions hagin de ser sempre deterministes.
</p>

<p>
Si ens mirem un document DTD:
</p>
<pre class="code dtd"><ol><li class="li1"><div class="de1">&lt;!ELEMENT classe(professor|alumnes)&gt;</div></li><li class="li1"><div class="de1">&lt;!ELEMENT professor (nom,cognoms)&gt;</div></li><li class="li1"><div class="de1">&lt;!ELEMENT alumnes (alumne*) &gt;</div></li><li class="li1"><div class="de1">&lt;!ELEMENT alumne (nom,cognom) &gt;</div></li><li class="li1"><div class="de1">&lt;!ELEMENT nom (#PCDATA)&gt;</div></li><li class="li1"><div class="de1">&lt;!ELEMENT cognom (#PCDATA)&gt;</div></li></ol></pre>

<p>
Quan s’analitza un fitxer XML es defineix quina és l’arrel de la DTD. Si considerem que l’arrel és l’element <code>&lt;classe&gt;</code>, el procés de validació començarà en la primera línia que ens diu que perquè el document sigui vàlid després de l’arrel hi ha d’haver un element <code>&lt;professor&gt;</code> o bé un element <code>&lt;alumnes&gt;</code>. Si el que arriba és un <code>&lt;professor&gt;</code> el procediment de validació passarà a avaluar la segona i si arriba un <code>&lt;alumne&gt;</code> passarà a la tercera. Si seguim amb l’avaluació veurem que realment el validador sempre que es troba amb una alternativa acabarà anant a una sola expressió. Això és perquè la DTD analitzada és <strong>determinista</strong>.
</p>

<p>
El mateix ho podem fer amb una expressió més complexa que contingui diferents elements dins de l’alternativa. El validador ha de poder triar, en llegir el primer element, amb quina de les alternatives s’ha de quedar. Si m’arriba un element <code>&lt;nom&gt;</code> em quedo amb l’alternativa de l’esquerra, <code>nom,cognoms</code>, i si m’arriba un <code>&lt;àlies&gt;</code> em quedo amb la de la dreta, <code>àlies,nom,cognoms</code>.
</p>
<pre class="code dtd"><ol><li class="li1"><div class="de1">&lt;!ELEMENT persona(nom,cognom|àlies,nom,cognom)&gt;</div></li></ol></pre>

<p>
Si en algun moment algú crea un document que no sigui determinista la validació fallarà. Això passarà si en algun moment el validador es troba que no pot decidir quina és l’alternativa correcta.
</p>
<pre class="code dtd"><ol><li class="li1"><div class="de1">&lt;!ELEMENT terrestre(persona, home | persona, dona)&gt;</div></li></ol></pre>

<p>
Quan des de l’element <code>&lt;terrestre&gt;</code> ens arribi un element <code>&lt;persona&gt;</code> el processador no tindrà cap manera de determinar si estem fent referència a l’element <code>&lt;persona&gt;</code> de l’expressió de la dreta <code>persona,home</code> o bé el de l’esquerra <code>persona,dona</code>, i per tant fallarà perquè té dues opcions possibles. És una expressió <strong>no determinista</strong>. 
</p>

<p>
Sovint les expressions no deterministes les podem expressar d’una altra manera, de manera que esdevinguin deterministes. L’exemple anterior es podia haver escrit d’una manera determinista perquè en arribar un element <code>&lt;persona&gt;</code> no hi hagi dubtes.
</p>
<pre class="code dtd"><ol><li class="li1"><div class="de1">&lt;!ELEMENT terrestre(persona,(home|dona))&gt;</div></li></ol></pre>

<p>
Es força que sempre aparegui un element <code>&lt;persona&gt;</code> i després hi haurà l’alternativa entre un <code>&lt;home&gt;</code> o un <code>&lt;dona&gt;</code> que és determinista.
</p>

<p>
Les expressions no deterministes són més corrents del que sembla, ja que els modificadors les poden provocar i pot ser que no ho semblin. Si es volgués escriure una expressió que determini un llibre a un llibre a partir de l’autor o el títol en qualsevol ordre:
</p>
<pre class="code dtd"><ol><li class="li1"><div class="de1">&lt;!ELEMENT llibre(autor?,titol?|titol?,autor?)&gt;</div></li></ol></pre>

<p>
Però l’expressió anterior és incorrecta, ja que si el validador es troba un <code>&lt;autor&gt;</code> no sap si és l’autor del costat dret de la condició <code>autor?,titol?</code> o bé és el del costat esquerre que no té títol, <code>titol?,autor?</code>.
</p>

<p>
L’expressió determinista idèntica a l’anterior seria:
</p>
<pre class="code dtd"><ol><li class="li1"><div class="de1">&lt;!ELEMENT llibre(autor,titol?|titol,autor?|EMPTY)&gt;</div></li></ol></pre>

</div>

<h3><a id="exemple_de_creacio_d_una_dtd" >Exemple de creació d&#039;una DTD</a></h3>
<div class="level3">

<p>
Les DTD es continuen fent servir perquè són senzilles de crear però cal recordar sempre les limitacions que tenen, i tenir present que no sempre s’adaptaran perfectament a allò que es vol fer.
</p>

</div>

<h4><a id="enunciat" >Enunciat</a></h4>
<div class="level4">

<p>
Una empresa ha preparat una botiga d’Internet que genera les comandes dels clients en un format XML que s’envia al programa de gestió de manera automàtica.
</p>

<p>
Els XML que es generen contenen dades del client i de la comanda que s’ha fet:
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;?xml</span> <span class="re0">version</span>=<span class="st0">&quot;1.0&quot;</span> <span class="re0">encoding</span>=<span class="st0">&quot;UTF-8&quot;</span><span class="re2">?&gt;</span></span></div></li><li class="li1"><div class="de1"><span class="sc0">&lt;!DOCTYPE comanda SYSTEM &quot;comanda.dtd&quot;&gt;</span></div></li><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;comanda</span> <span class="re0">numero</span>=<span class="st0">&quot;26&quot;</span> <span class="re0">dia</span>=<span class="st0">&quot;2011-12-01&quot;</span> <span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1">    <span class="sc3"><span class="re1">&lt;client</span> <span class="re0">codi</span>=<span class="st0">&quot;20&quot;</span><span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1">        <span class="sc3"><span class="re1">&lt;nom<span class="re2">&gt;</span></span></span>Frederic<span class="sc3"><span class="re1">&lt;/nom<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">        <span class="sc3"><span class="re1">&lt;cognom<span class="re2">&gt;</span></span></span>Garcia<span class="sc3"><span class="re1">&lt;/cognom<span class="re2">&gt;</span></span></span>             </div></li><li class="li1"><div class="de1">    <span class="sc3"><span class="re1">&lt;/client<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">    <span class="sc3"><span class="re1">&lt;articles<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">        <span class="sc3"><span class="re1">&lt;article<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">            <span class="sc3"><span class="re1">&lt;descripci</span>ó<span class="re2">&gt;</span></span>Yoda Mimobot USB Flash Drive 8GB<span class="sc3"><span class="re1">&lt;/descripci</span>ó<span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1">            <span class="sc3"><span class="re1">&lt;quantitat<span class="re2">&gt;</span></span></span>5<span class="sc3"><span class="re1">&lt;/quantitat<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">            <span class="sc3"><span class="re1">&lt;preu<span class="re2">&gt;</span></span></span>38.99<span class="sc3"><span class="re1">&lt;/preu<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">        <span class="sc3"><span class="re1">&lt;/article<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">        <span class="sc3"><span class="re1">&lt;article<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">            <span class="sc3"><span class="re1">&lt;descripci</span>ó<span class="re2">&gt;</span></span>Darth Vader Half Helmet Case for iPhone<span class="sc3"><span class="re1">&lt;/descripci</span>ó<span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1">            <span class="sc3"><span class="re1">&lt;quantitat<span class="re2">&gt;</span></span></span>2<span class="sc3"><span class="re1">&lt;/quantitat<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">            <span class="sc3"><span class="re1">&lt;preu<span class="re2">&gt;</span></span></span>29.95<span class="sc3"><span class="re1">&lt;/preu<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">        <span class="sc3"><span class="re1">&lt;/article<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">    <span class="sc3"><span class="re1">&lt;/articles<span class="re2">&gt;</span></span></span>    </div></li><li class="li1"><div class="de1">    <span class="sc3"><span class="re1">&lt;total</span> <span class="re0">valor</span>=<span class="st0">&quot;254,85&quot;</span><span class="re2">/&gt;</span></span>    </div></li><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;/comanda<span class="re2">&gt;</span></span></span></div></li></ol></pre>

<p>
Abans de passar-lo al programa han decidit que per tenir més seguretat es farà un pas previ que consistirà a validar que el document. Per això necessiten que es generi la DTD.
</p>

</div>

<h4><a id="resolucio" >Resolució</a></h4>
<div class="level4">

<p>
S’hauran de fer dues coses:
</p>
<ul>
<li class="level1"><div class="li"> Associar les regles al fitxer XML. </div>
</li>
<li class="level1"><div class="li"> Crear un fitxer amb les regles, que s’anomenarà “comanda.dtd”.</div>
</li>
</ul>

</div>

<h5><a id="associar_el_fitxer_xml" >Associar el fitxer XML</a></h5>
<div class="level5">

<p>
En la segona línia del document s’hi especifica la regla <code>DOCTYPE</code> per associar el fitxer amb la DTD.
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;?xml</span> <span class="re0">version</span>=<span class="st0">&quot;1.0&quot;</span><span class="re2">?&gt;</span></span></div></li><li class="li1"><div class="de1"><span class="sc0">&lt;!DOCTYPE albarà SYSTEM &quot;comanda.dtd&quot;&gt;</span></div></li></ol></pre>

</div>

<h5><a id="crear_les_regles" >Crear les regles</a></h5>
<div class="level5">

<p>
No hi ha una manera única de crear una DTD però normalment seguir un sistema pot ajudar a evitar errors. El sistema que es farà servir per resoldre el sistema consisteix a començar per l’arrel i anar definint els fulls per nivells.
</p>

<p>
L’arrel del document és l’element <code>&lt;comanda&gt;</code>, que té tres fills:
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3">&lt;!ELEMENT comanda <span class="br0">&#40;</span>client, articles, total<span class="br0">&#41;</span><span class="re2">&gt;</span></span></div></li></ol></pre>

<p>
També té dos atributs, <code>numero</code> i <code>dia</code>, que només poden tenir valors sense espais i, per tant, seran <code>NMTOKEN</code>. Són dades obligatòries per motius fiscals.
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3">&lt;!ATTLIST comanda numero NMTOKEN #REQUIRED<span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1"><span class="sc3">&lt;!ATTLIST comanda dia NMTOKEN #REQUIRED<span class="re2">&gt;</span></span></div></li></ol></pre>

<p>
Un cop definit el primer nivell podem passar a definir els altres. D’una banda l’element <code>&lt;client&gt;</code>, que té un atribut per als clients existents i no en tindrà per als nous:
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3">&lt;!ELEMENT client <span class="br0">&#40;</span>nom, cognom<span class="br0">&#41;</span><span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1"><span class="sc3">&lt;!ATTLIST client codi NMTOKEN #IMPLIED <span class="re2">&gt;</span></span></div></li></ol></pre>

<p>
D’altra banda l’element <code>&lt;total&gt;</code>, que és buit però té un atribut:
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3">&lt;!ELEMENT total EMPTY<span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1"><span class="sc3">&lt;!ATTLIST total valor CDATA #REQUIRED <span class="re2">&gt;</span></span></div></li></ol></pre>

<p>
També l’element <code>&lt;articles&gt;</code>, que contindrà una llista dels articles que ha comprat el client. Com que no tindria sentit fer una comanda sense articles el modificador que es farà servir serà <code>+</code>.
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3">&lt;!ELEMENT articles <span class="br0">&#40;</span>article+<span class="br0">&#41;</span><span class="re2">&gt;</span></span></div></li></ol></pre>

<p>
Per la seva part, desenvolupar <code>&lt;article&gt;</code> tampoc no portarà gaires problemes:
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3">&lt;!ELEMENT article <span class="br0">&#40;</span>descripció, quantitat, preu<span class="br0">&#41;</span><span class="re2">&gt;</span></span></div></li></ol></pre>

<p>
Per acabar només queden els elements que contenen dades:
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3">&lt;!ELEMENT nom <span class="br0">&#40;</span>#PCDATA<span class="br0">&#41;</span><span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1"><span class="sc3">&lt;!ELEMENT cognom <span class="br0">&#40;</span>#PCDATA<span class="br0">&#41;</span><span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1"><span class="sc3">&lt;!ELEMENT descripció <span class="br0">&#40;</span>#PCDATA<span class="br0">&#41;</span><span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1"><span class="sc3">&lt;!ELEMENT quantitat <span class="br0">&#40;</span>#PCDATA<span class="br0">&#41;</span><span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1"><span class="sc3">&lt;!ELEMENT preu <span class="br0">&#40;</span>#PCDATA<span class="br0">&#41;</span><span class="re2">&gt;</span></span></div></li></ol></pre>

<p>
El fitxer resultant serà:
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;?xml</span> <span class="re0">version</span>=<span class="st0">&quot;1.0&quot;</span> <span class="re0">encoding</span>=<span class="st0">&quot;UTF-8&quot;</span><span class="re2">?&gt;</span></span></div></li><li class="li1"><div class="de1"><span class="sc3">&lt;!ELEMENT comanda <span class="br0">&#40;</span>client, articles, total<span class="br0">&#41;</span> <span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1"><span class="sc3">&lt;!ATTLIST comanda numero NMTOKEN #REQUIRED <span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1"><span class="sc3">&lt;!ATTLIST comanda dia NMTOKEN #REQUIRED<span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="sc3">&lt;!ELEMENT client <span class="br0">&#40;</span>nom,cognom<span class="br0">&#41;</span> <span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1"><span class="sc3">&lt;!ATTLIST client codi NMTOKEN #IMPLIED <span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="sc3">&lt;!ELEMENT total EMPTY<span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1"><span class="sc3">&lt;!ATTLIST total valor CDATA #REQUIRED <span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="sc3">&lt;!ELEMENT articles <span class="br0">&#40;</span>article+<span class="br0">&#41;</span><span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1"><span class="sc3">&lt;!ELEMENT article <span class="br0">&#40;</span>descripció, quantitat, preu<span class="br0">&#41;</span><span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="sc3">&lt;!ELEMENT nom <span class="br0">&#40;</span>#PCDATA<span class="br0">&#41;</span><span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1"><span class="sc3">&lt;!ELEMENT cognom <span class="br0">&#40;</span>#PCDATA<span class="br0">&#41;</span><span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1"><span class="sc3">&lt;!ELEMENT descripció <span class="br0">&#40;</span>#PCDATA<span class="br0">&#41;</span><span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1"><span class="sc3">&lt;!ELEMENT quantitat <span class="br0">&#40;</span>#PCDATA<span class="br0">&#41;</span><span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1"><span class="sc3">&lt;!ELEMENT preu <span class="br0">&#40;</span>#PCDATA<span class="br0">&#41;</span><span class="re2">&gt;</span></span></div></li></ol></pre>

</div>

<h2><a id="w3c_xml_schema_definition_language" >W3C XML Schema Definition Language</a></h2>
<div class="level2">

<p>
En l’especificació XML es fa referència a les DTD com a mètode per definir vocabularis XML, però les DTD tenen una sèrie de limitacions que van portar el <acronym title="World Wide Web Consortium">W3C</acronym> a definir una nova especificació. Aquesta especificació va rebre el nom de <strong><acronym title="World Wide Web Consortium">W3C</acronym> XML Schema Definition Language</strong> (que popularment s’anomena <strong>XML Schema</strong> o <strong>XSD</strong>), i es va crear per substituir la DTD com a mètode de definició de vocabularis per a documents XML.
</p>

<p>
Es pot trobar l’especificació més recent a <a href="http://www.w3.org/XML/Schema" class="urlextern" title="http://www.w3.org/XML/Schema"  rel="nofollow">www.w3.org/XML/Schema</a>.
</p>
<div class="ioctextl"><div class="ioccontent"><p class="ioctitle">Relax NG</p>
<p>
Durant l’especificació molts membres del grup de treball van considerar que el que sortia era massa complex i van desenvolupar alternatives més simples, entre les quals destaca <strong>Relax NG</strong> (<a href="http://www.relaxng.org" class="urlextern" title="http://www.relaxng.org"  rel="nofollow">www.relaxng.org</a>). 
</p>

<p>
Com que <strong>Relax NG</strong> es va fer més tard que DTD i XSD, va poder solucionar alguns dels problemes.
</p>

<p>
Els esquemes es poden definir en dues versions de Relax NG, una basada en XML i una altra que no ho està, anomenada <em>Relax NG Compact</em>, i que està pensada per generar documents d’esquemes més petits i compactes.
</p>
</div></div>
<p>
L’èxit d’XSD ha estat molt gran i actualment es fa servir per a altres tasques a part de simplement validar XML. També es fa servir en altres tecnologies XML com XQuery, serveis web, etc.
</p>

<p>
Les característiques més importants que aporta XSD són:
</p>
<ul>
<li class="level1"><div class="li"> Està escrit en XML i, per tant, no cal aprendre un llenguatge nou per definir esquemes XML.</div>
</li>
<li class="level1"><div class="li"> Té el seu propi sistema de dades, de manera que es podrà comprovar el contingut dels elements.</div>
</li>
<li class="level1"><div class="li"> Suporta espais de noms per permetre barrejar diferents vocabularis.</div>
</li>
<li class="level1"><div class="li"> Permet ser reutilitzat i segueix els models de programació com herència d’objectes i substitució de tipus.</div>
</li>
</ul>

</div>

<h3><a id="associar_un_esquema_a_un_fitxer_xml" >Associar un esquema a un fitxer XML</a></h3>
<div class="level3">

<p>
A diferència del que passa en altres llenguatges de definició –com per exemple en les DTD, en què l’associació s’ha d’especificar en el document XML–, per validar un XML amb un XSD no cal modificar el fitxer XML. De totes maneres, també és possible fer-ho definint-hi l’espai de noms.
</p>

<p>

</p>

<p>
Per associar un document XML a un document d’esquema cal definir-hi l’espai de noms amb l’atribut <code>xmlns</code>, i per mitjà d’un dels atributs del llenguatge definir-hi quin és el fitxer d’esquema:
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;lliga</span> <span class="re0">xmlns:xsi</span>=<span class="st0">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></div></li><li class="li1"><div class="de1"><span class="sc3">       <span class="re0">xsi:noNamespaceSchemaLocation</span>=<span class="st0">&quot;lliga.xsd&quot;</span><span class="re2">&gt;</span></span></div></li></ol></pre>

<p>
Es poden definir les referències al fitxer d’esquema de dues maneres, que podem veure en la <span class="tabref"><a href="#36"><span>taula</span></a></span>.
</p>
<div class="ioctable ">
<div class="titletable"><a name="table36"><span>Taula: </span></a>Definir referències a un esquema</div>
<div class="table"><table class="inline">
	<tr class="row0">
		<th class="col0 leftalign"> Atribut        </th><th class="col1"> Significat </th>
	</tr>
	<tr class="row1">
		<td class="col0"> <code>noNamespaceSchemaLocation</code> </td><td class="col1"> S’empra quan no es faran servir espais de noms en el document. </td>
	</tr>
	<tr class="row2">
		<td class="col0"> <code>schemaLocation</code> </td><td class="col1"> S’empra quan es fan servir explícitament els noms dels espais de noms en les etiquetes. </td>
	</tr>
</table></div>
</div>
</div>

<h3><a id="definir_un_fitxer_d_esquema" >Definir un fitxer d&#039;esquema</a></h3>
<div class="level3">

<p>
L’XSD està basat en XML i, per tant, ha de complir amb les regles d’XML:
</p>
<ul>
<li class="level1"><div class="li"> Tot i que no és obligatori normalment sempre es comença el fitxer amb la declaració XML.</div>
</li>
<li class="level1"><div class="li"> Només hi ha un element arrel, que en aquest cas és <code>&lt;schema&gt;</code>.</div>
</li>
</ul>

<p>
Com que no s’està generant un document XML lliure sinó que s’està fent servir un vocabulari concret i conegut per poder fer servir els elements XML sempre s’hi haurà d’especificar l’espai de noms d’XSD: ”http://www.w3.org/2001/XMLSchema”.
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;?xml</span> <span class="re0">version</span>=<span class="st0">&quot;1.0&quot;</span> <span class="re2">?&gt;</span></span></div></li><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;xs:schema</span> <span class="re0">xmlns:xs</span>=<span class="st0">&quot;http://www.w3.org/2001/XMLSchema&quot;</span><span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1">    ...</div></li><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;/xs:schema<span class="re2">&gt;</span></span></span></div></li></ol></pre>

<p>
En la declaració d’aquest espai de noms s’està definint que <code>xs</code> és l’àlies per fer referència a totes les etiquetes d’aquest espai de noms. Els àlies per a XSD normalment són <code>xs</code> o <code>xsd</code>, però en realitat no importa quin es faci servir sempre que es faci servir el mateix en tot el document.
</p>
<div class="ioctext"><div class="ioccontent"><p class="ioctitle"> Etiquetes d&#039;XSD</p>
<p>
L’XSD defineix moltes etiquetes i no es veuran totes aquí. Podeu trobar totes les etiquetes possibles en l’especificació 
<a href="http://www.w3.org/TR/xmlschema11-1/" class="urlextern" title="http://www.w3.org/TR/xmlschema11-1/"  rel="nofollow">www.w3.org/TR/xmlschema11-1</a> .
</p>
</div></div>
<p>
L’etiqueta <code>&lt;schema&gt;</code> pot tenir diferents atributs, alguns dels quals podem veure en la <span class="tabref"><a href="#table37"><span>taula</span></a></span>.
</p>
<div class="ioctable ">
<div class="titletable"><a name="table37"><span>Taula: </span></a>Atributs de l’etiqueta <code>&lt;schema&gt;</code></div>
<div class="table"><table class="inline">
	<tr class="row0">
		<th class="col0 leftalign"> Atribut              </th><th class="col1 leftalign"> Significat                                                                                                                                        </th>
	</tr>
	<tr class="row1">
		<td class="col0"> <code>attributeFormDefault</code> </td><td class="col1"> Pot ser <code>qualified</code> si fem que sigui obligatori posar l’espai de noms davant dels atributs o <code>unqualified</code> si no ho fem. Per defecte es fa servir <code>unqualified</code>. </td>
	</tr>
	<tr class="row2">
		<td class="col0 leftalign"> <code>elementFormDefault</code>   </td><td class="col1 leftalign"> Serveix per definir si cal l’espai de noms davant del nom. Pot prendre els valors <code>qualified</code> i <code>unqualified</code>.                   </td>
	</tr>
	<tr class="row3">
		<td class="col0 leftalign"> <code>version</code>              </td><td class="col1"> Permet definir quina versió del document d’esquemes estem definint (no és la versió d’XML Schemas). </td>
	</tr>
</table></div>
</div>
<p>
A partir de l’etiqueta arrel ja es poden començar a definir les etiquetes del vocabulari que es vol crear.
</p>

</div>

<h4><a id="definicio_d_elements" >Definició d&#039;elements</a></h4>
<div class="level4">

<p>
Els elements es defineixen tal com es veu a la <span class="figref"><a href="#fig104"><span>figura</span></a></span>, fent servir l’etiqueta <code>&lt;element&gt;</code>, i amb atributs s’hi especifica com a mínim el nom i opcionalment el tipus de dades que contindrà l’element.
</p>
<div class="iocfigure"><a name="fig104"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

Definició d’un element

</figcaption><img src="../media/asxm04u2_18.png" alt="" /></figure>
</div>
<p>
L’XSD divideix els elements en dos grans grups basant-se en les dades que contenen:
</p>
<ul>
<li class="level1"><div class="li"> <strong>Elements amb contingut de tipus simple</strong>: són elements sense atributs que només contenen dades.</div>
</li>
<li class="level1"><div class="li"> <strong>Elements amb contingut de tipus complex</strong>: són elements que poden tenir atributs, no tenir contingut o contenir elements.</div>
</li>
</ul>

<p>
A partir de la definició es pot veure que gairebé sempre hi haurà algun tipus complex, ja que l’arrel normalment contindrà altres elements.
</p>

</div>

<h4><a id="elements_amb_contingut_de_tipus_simple" >Elements amb contingut de tipus simple</a></h4>
<div class="level4">
<div class="iocimportant"><div class="ioccontent">
<p>
Es consideren elements amb contingut de tipus simple aquells que no contenen altres elements ni tenen atributs.
</p>
</div></div>
<p>
La versió 1.1 d’XSD defineix una cinquantena de tipus de dades diferents, que es poden trobar a la seva definició (<a href="http://www.w3.org/TR/xmlschema11-2/" class="urlextern" title="http://www.w3.org/TR/xmlschema11-2/"  rel="nofollow">www.w3.org/TR/xmlschema11-2</a>). Entre els més usats en destaquen els de la <span class="tabref"><a href="#table38"><span>taula</span></a></span>.
</p>
<div class="ioctable ">
<div class="titletable"><a name="table38"><span>Taula: </span></a>Tipus de dades més usats en XSD</div>
<div class="table"><table class="inline">
	<tr class="row0">
		<th class="col0 leftalign"> Tipus        </th><th class="col1 leftalign"> Dades que s’hi poden emmagatzemar              </th>
	</tr>
	<tr class="row1">
		<td class="col0 leftalign"> <em>string</em>       </td><td class="col1 leftalign"> Cadenes de caràcters                           </td>
	</tr>
	<tr class="row2">
		<td class="col0 leftalign"> <em>decimal</em>      </td><td class="col1 leftalign"> Valors numèrics                                </td>
	</tr>
	<tr class="row3">
		<td class="col0 leftalign"> <em>boolean</em>      </td><td class="col1 leftalign"> Només pot contenir ‘true’ o ‘false’ o (1 o 0)  </td>
	</tr>
	<tr class="row4">
		<td class="col0 leftalign"> <em>date</em>         </td><td class="col1 leftalign"> Dates en forma (AAAA-MM-DD)                    </td>
	</tr>
	<tr class="row5">
		<td class="col0 leftalign"> <em>anyURI</em>       </td><td class="col1 leftalign"> Referències a llocs (<acronym title="Uniform Resource Locator">URL</acronym>, camins de disc…)   </td>
	</tr>
	<tr class="row6">
		<td class="col0"> <em>base64binary</em> </td><td class="col1 leftalign"> Dades binàries codificades en <em>base64</em>           </td>
	</tr>
	<tr class="row7">
		<td class="col0 leftalign"> <em>integer</em>      </td><td class="col1 leftalign"> Nombres enters                                 </td>
	</tr>
</table></div>
</div>
<p>
A partir dels tipus bàsics, l’estàndard en crea d’altres amb l’objectiu de tenir tipus de dades que es puguin adaptar millor als objectius de qui dissenya l’esquema. En aquest sentit apareixen els tipus anomenats <em>positiveInteger</em>, <em>nonNegativeInteger</em>, <em>gYearMonth</em>, <em>unsignedInt</em>…
</p>

<p>
Els tipus de dades permeten restringir els valors que contindran les etiquetes XML. Per exemple, si es parteix de la definició següent:
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">&quot;posicio&quot;</span> <span class="re0">type</span>=<span class="st0">&quot;xs:integer&quot;</span><span class="re2">/&gt;</span></span></div></li><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;/xs:schema<span class="re2">&gt;</span></span></span></div></li></ol></pre>

<p>
Només s’aconseguirà validar un element si el seu contingut és un nombre enter. Per exemple, l’exemple següent no validarà:
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;posicio<span class="re2">&gt;</span></span></span>Primer<span class="sc3"><span class="re1">&lt;/posicio<span class="re2">&gt;</span></span></span></div></li></ol></pre>

<p>
En la <span class="tabref"><a href="#table39"><span>taula</span></a></span> es poden veure exemples de definicions d’elements i valors que hi validen.
</p>
<div class="ioctable ">
<div class="titletable"><a name="table39"><span>Taula: </span></a>Exemples d’elements i què s’hi pot validar</div>
<div class="table"><table class="inline">
	<tr class="row0">
		<th class="col0 leftalign"> Etiqueta                                      </th><th class="col1 leftalign"> Exemple                         </th>
	</tr>
	<tr class="row1">
		<td class="col0 leftalign"> &lt;xs:element name=“dia” type=“xs:date” /&gt;      </td><td class="col1 leftalign"> &lt;dia&gt;2011-09-15&lt;/dia&gt;           </td>
	</tr>
	<tr class="row2">
		<td class="col0"> &lt;xs:element name=“alçada” type=“xs:integer”/&gt; </td><td class="col1 leftalign"> &lt;alçada&gt;220&lt;/alçada&gt;            </td>
	</tr>
	<tr class="row3">
		<td class="col0 leftalign"> &lt;xs:element name=“nom” type=“xs:string”/&gt;     </td><td class="col1 leftalign"> &lt;nom&gt;Pere Puig&lt;/nom&gt;            </td>
	</tr>
	<tr class="row4">
		<td class="col0 leftalign"> &lt;xs:element name=“mida” type=“xs:float”/&gt;     </td><td class="col1 leftalign"> &lt;mida&gt;1.7E2&lt;/mida&gt;              </td>
	</tr>
	<tr class="row5">
		<td class="col0 leftalign"> &lt;xs:element name=“lloc” type=“xs:anyURI”/&gt;    </td><td class="col1"> &lt;lloc&gt;http://www.ioc.cat&lt;/lloc&gt; </td>
	</tr>
</table></div>
</div>
<p>
Quan es defineix una etiqueta en XSD s’està definint que l’etiqueta haurà de sortir en el document XML una vegada. És bastant habitual que hi hagi etiquetes que es repeteixin un nombre determinat de vegades. En XSD això s’ha simplificat per mitjà d’uns atributs de l’etiqueta <code>&lt;element&gt;</code> que determinen la cardinalitat dels elements:
</p>
<ul>
<li class="level1"><div class="li"> <strong>minOccurs</strong>: permet definir quantes vegades ha de sortir un element com a mínim. Un valor de ‘0’ indica que l’element pot no sortir.</div>
</li>
<li class="level1"><div class="li"> <strong>maxOccurs</strong>: serveix per definir quantes vegades com a màxim pot sortir un element. <code>unbounded</code> implica que no hi ha límit en les vegades que pot sortir.</div>
</li>
</ul>

<p>
Fent servir els atributs es pot definir que l’element <code>&lt;nom&gt;</code> ha de sortir una vegada i l’element <code>&lt;cognom&gt;</code> un màxim de dues vegades.
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">&quot;nom&quot;</span> <span class="re2">/&gt;</span></span></div></li><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">&quot;cognom&quot;</span> <span class="re0">maxOccurs</span>=<span class="st0">&quot;2&quot;</span><span class="re2">/&gt;</span></span></div></li></ol></pre>

<p>
També es poden donar valors als elements amb els atributs <code>fixed</code>, <code>default</code> i <code>nullable</code>.
</p>

<p>
L’atribut <code>fixed</code> permet definir un valor obligatori per a un element:
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">&quot;centre&quot;</span> <span class="re0">type</span>=<span class="st0">&quot;xs:string&quot;</span> <span class="re0">fixed</span>=<span class="st0">&quot;IOC&quot;</span><span class="re2">/&gt;</span></span></div></li></ol></pre>

<p>
De manera que només es podrà definir el contingut amb el valor especificat (o sense res):
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;centre</span> <span class="re2">/&gt;</span></span></div></li><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;centre<span class="re2">&gt;</span></span></span>IOC<span class="sc3"><span class="re1">&lt;/centre<span class="re2">&gt;</span></span></span></div></li></ol></pre>

<p>
Però mai un valor diferent de l’especificat:
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;centre<span class="re2">&gt;</span></span></span>Institut Cendrassos<span class="sc3"><span class="re1">&lt;/centre<span class="re2">&gt;</span></span></span></div></li></ol></pre>

<p>
A diferència de <code>fixed</code>, <code>default</code> assigna un valor per defecte però deixa que sigui canviat en el contingut de l’etiqueta.
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;xsi:element</span> <span class="re0">name</span>=<span class="st0">&quot;centre&quot;</span> <span class="re0">type</span>=<span class="st0">&quot;xs:string&quot;</span> <span class="re0">default</span>=<span class="st0">&quot;IOC&quot;</span> <span class="re2">/&gt;</span></span></div></li></ol></pre>

<p>
La definició permetria validar amb els tres casos següents:
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;centre</span> <span class="re2">/&gt;</span></span></div></li><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;centre<span class="re2">&gt;</span></span></span>IOC<span class="sc3"><span class="re1">&lt;/centre<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;centre<span class="re2">&gt;</span></span></span>Institut Cendrassos<span class="sc3"><span class="re1">&lt;/centre<span class="re2">&gt;</span></span></span></div></li></ol></pre>

<p>
L’atribut <code>nullable</code> es fa servir per dir si es permeten continguts nuls. Per tant, només pot prendre els valors <code>yes</code> o <code>no</code>.
</p>

</div>

<h5><a id="tipus_simples_personals" >Tipus simples personals</a></h5>
<div class="level5">

<p>
Com que a vegades pot interessar definir valors per als elements que no han de coincidir necessàriament amb els estàndards, l’XSD permet definir tipus de dades personals. Per exemple, si es vol un valor numèric però que no accepti tots els valors sinó un subconjunt dels enters.
</p>

<p>
Per definir tipus simples personals no es posa el tipus a l’element i s’hi defineix un fill <code>&lt;simpleType&gt;</code>. 
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">&quot;persona&quot;</span><span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1">    <span class="sc3"><span class="re1">&lt;xs:simpleType<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">       ...</div></li><li class="li1"><div class="de1">    <span class="sc3"><span class="re1">&lt;/xs:simpleType<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;/xs:element<span class="re2">&gt;</span></span></span></div></li></ol></pre>

<p>
Dins de <code>simpleType</code> s’especifica quina és la modificació que s’hi vol fer. El més corrent és que les modificacions sigui fetes amb <code>list</code>, <code>union</code>, <code>restriction</code> o <code>extension</code>.
</p>
<div class="iocnote"><div class="ioccontent">
<p>
A pesar que es poden definir llistes de valors no es recomana gaire fer-ne servir. La majoria dels experts creuen que és millor definir els valors de la llista fent servir repeticions d’etiquetes.
</p>
</div></div>
<p>
Fer servir <strong>list</strong> permetrà definir que un element pot contenir llistes de valors. Per tant, per especificar que un element <code>&lt;partits&gt;</code> pot contenir una llista de dates es definiria:
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">&quot;partits&quot;</span><span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1">  <span class="sc3"><span class="re1">&lt;xs:simpleType<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">      <span class="sc3"><span class="re1">&lt;xs:list</span> <span class="re0">itemType</span>=<span class="st0">&quot;xs:date&quot;</span><span class="re2">/&gt;</span></span></div></li><li class="li1"><div class="de1">  <span class="sc3"><span class="re1">&lt;/xs:simpleType<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;/xs:element<span class="re2">&gt;</span></span></span></div></li></ol></pre>

<p>
L’etiqueta validaria amb una cosa com: 
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;partits<span class="re2">&gt;</span></span></span> 2011-01-07 2011-01-15 2011-01-21<span class="sc3"><span class="re1">&lt;/partits<span class="re2">&gt;</span></span></span></div></li></ol></pre>
<div class="iocimportant"><div class="ioccontent">
<p>
Els elements <code>simpleType</code> també es poden definir amb un nom fora dels elements i posteriorment usar-los com a tipus de dades personal.
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;xs:simpleType</span> <span class="re0">name</span>=<span class="st0">&quot;dies&quot;</span><span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1">    <span class="sc3"><span class="re1">&lt;xs:list</span> <span class="re0">itemType</span>=<span class="st0">&quot;xs:date&quot;</span><span class="re2">/&gt;</span></span></div></li><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;/xs:simpleType<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">&quot;partits&quot;</span> <span class="re0">type</span>=<span class="st0">&quot;dies&quot;</span><span class="re2">/&gt;</span></span></div></li></ol></pre>
</div></div>
<p>
Fent servir els tipus personalitzats amb nom es poden crear modificacions de tipus <strong>union</strong>. Els modificadors <strong>union</strong> serveixen per fer que es puguin mesclar tipus diferents en el contingut d’un element.
</p>

<p>
La definició de l’element <code>&lt;preu&gt;</code> farà que l’element pugui ser de tipus <code>valor</code> o de tipus <code>simbol</code>.
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">&quot;preus&quot;</span><span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1">    <span class="sc3"><span class="re1">&lt;xs:sipleType<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">        <span class="sc3"><span class="re1">&lt;xs:union</span> <span class="re0">memberTypes</span>=<span class="st0">&quot;valor simbol&quot;</span><span class="re2">/&gt;</span></span></div></li><li class="li1"><div class="de1">    <span class="sc3"><span class="re1">&lt;/xs:simpleType<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;/xs:element<span class="re2">&gt;</span></span></span></div></li></ol></pre>

<p>
Amb això li podríem assignar valors com aquests:
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;preus<span class="re2">&gt;</span></span></span>25 €<span class="sc3"><span class="re1">&lt;/preus<span class="re2">&gt;</span></span></span></div></li></ol></pre>

<p>
Però sense cap mena de dubte el modificador més interessant és el que permet definir restriccions als tipus base. Amb el modificador <strong>restriction</strong> es poden crear tipus de dades en què només s’acceptin alguns valors, que les dades compleixin una determinada condició, etc.
</p>

<p>
L’element <code>&lt;naixement&gt;</code> només podrà tenir valors enters entre 1850 i 2011 si es defineix d’aquesta manera:
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;xs:simpleType</span> <span class="re0">name</span>=<span class="st0">&quot;any_naixement&quot;</span><span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1">    <span class="sc3"><span class="re1">&lt;xs:restricion</span> <span class="re0">base</span>=<span class="st0">&quot;xs:integer&quot;</span><span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1">        <span class="sc3"><span class="re1">&lt;xs:maxInclusive</span> <span class="re0">value</span>=<span class="st0">&quot;2011&quot;</span><span class="re2">/&gt;</span></span></div></li><li class="li1"><div class="de1">        <span class="sc3"><span class="re1">&lt;xs:minInclusive</span> <span class="re0">value</span>=<span class="st0">&quot;1850&quot;</span><span class="re2">/&gt;</span></span></div></li><li class="li1"><div class="de1">    <span class="sc3"><span class="re1">&lt;/xs:restriction<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;/xs:simpleType<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">&quot;naixement&quot;</span> <span class="re0">type</span>=<span class="st0">&quot;any_naixement&quot;</span><span class="re2">/&gt;</span></span></div></li></ol></pre>

<p>
Es poden definir restriccions de molts tipus per mitjà d’atributs (<span class="tabref"><a href="#table40"><span>taula</span></a></span>). Normalment els valors de les restriccions s’especifiquen en l’atribut <code>value</code>:
</p>
<div class="ioctable ">
<div class="titletable"><a name="table40"><span>Taula: </span></a>Atributs que permeten definir restriccions en XSD</div>
<div class="table"><table class="inline">
	<tr class="row0">
		<th class="col0 leftalign"> Elements                     </th><th class="col1 leftalign"> Resultat                                                                                                                                  </th>
	</tr>
	<tr class="row1">
		<td class="col0"> <code>maxInclusive / maxExclusive</code> </td><td class="col1 leftalign"> Es fa servir per definir el valor numèric màxim que pot agafar un element.                                                                 </td>
	</tr>
	<tr class="row2">
		<td class="col0"> <code>minInclusive / minExclusive</code> </td><td class="col1 leftalign"> Permet definir el valor mínim del valor d’un element.                                                                                      </td>
	</tr>
	<tr class="row3">
		<td class="col0 leftalign"> <code>length</code>     </td><td class="col1"> Amb <code>lenght</code> restringim la llargada que pot tenir un element de text. Podem fer servir <code>&lt;xs:minLength&gt;</code> i <code>&lt;xs:maxLenght&gt;</code> per ser més precisos. </td>
	</tr>
	<tr class="row4">
		<td class="col0"> <code>enumeration</code> </td><td class="col1 leftalign"> Només permet que l’element tingui algun dels valors especificats en les diferents línies <code>&lt;enumeration&gt;</code>.                                    </td>
	</tr>
	<tr class="row5">
		<td class="col0 leftalign"> <code>totalDigits</code>   </td><td class="col1 leftalign"> Permet definir el nombre de dígits d’un valor numèric.                                                                                     </td>
	</tr>
	<tr class="row6">
		<td class="col0 leftalign"> <code>fractionDigits</code>  </td><td class="col1 leftalign"> Serveix per especificar el nombre de decimals que pot tenir un valor numèric.                                                              </td>
	</tr>
	<tr class="row7">
		<td class="col0 leftalign"> <code>pattern</code>   </td><td class="col1 leftalign"> Permet definir una expressió regular a la qual el valor de l’element s’ha d’adaptar per poder ser vàlid.                                                                                                                                          </td>
	</tr>
</table></div>
</div>
<p>
Per exemple, el valor de l’element <code>&lt;resposta&gt;</code> només podrà tenir un dels tres valors “A”, “B” o “C” si es defineix d’aquesta manera:
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">&quot;resposta&quot;</span><span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1">    <span class="sc3"><span class="re1">&lt;xs:simpleType<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">        <span class="sc3"><span class="re1">&lt;xs:enumeration</span> <span class="re0">value</span>=<span class="st0">&quot;A&quot;</span><span class="re2">/&gt;</span></span></div></li><li class="li1"><div class="de1">        <span class="sc3"><span class="re1">&lt;xs:enumeration</span> <span class="re0">value</span>=<span class="st0">&quot;B&quot;</span><span class="re2">/&gt;</span></span></div></li><li class="li1"><div class="de1">        <span class="sc3"><span class="re1">&lt;xs:enumeration</span> <span class="re0">value</span>=<span class="st0">&quot;C&quot;</span><span class="re2">/&gt;</span></span></div></li><li class="li1"><div class="de1">    <span class="sc3"><span class="re1">&lt;/xs:simpleType<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;/xs:element<span class="re2">&gt;</span></span></span></div></li></ol></pre>

<p>
Una de les restriccions més interessants són les definides per l’atribut <code>pattern</code>, que permet definir restriccions a partir d’expressions regulars. Com a norma general tenim que si s’especifica un caràcter en el patró aquest caràcter ha de sortir en el contingut; les altres possibilitats les podem veure a la <span class="tabref"><a href="#table41"><span>taula</span></a></span>
</p>
<div class="ioctable ">
<div class="titletable"><a name="table41"><span>Taula: </span></a>Definició d’expressions regulars</div>
<div class="table"><table class="inline">
	<tr class="row0">
		<th class="col0"> Símbol </th><th class="col1 leftalign"> Equivalència                                                       </th>
	</tr>
	<tr class="row1">
		<td class="col0 leftalign"> .      </td><td class="col1 leftalign"> Qualsevol caràcter                                                 </td>
	</tr>
	<tr class="row2">
		<td class="col0 leftalign"> \d     </td><td class="col1 leftalign"> Qualsevol dígit                                                    </td>
	</tr>
	<tr class="row3">
		<td class="col0 leftalign"> \D     </td><td class="col1 leftalign"> Qualsevol caràcter no dígit                                        </td>
	</tr>
	<tr class="row4">
		<td class="col0 leftalign"> \s     </td><td class="col1 leftalign"> Caràcters no imprimibles: espais, tabuladors, salts de línia…     </td>
	</tr>
	<tr class="row5">
		<td class="col0 leftalign"> \S     </td><td class="col1 leftalign"> Qualsevol caràcter imprimible                                      </td>
	</tr>
	<tr class="row6">
		<td class="col0 leftalign"> x*     </td><td class="col1 leftalign"> El de davant de * ha de sortir 0 o més vegades                     </td>
	</tr>
	<tr class="row7">
		<td class="col0 leftalign"> x+     </td><td class="col1 leftalign"> El de davant de + ha de sortir 1 o més vegades                     </td>
	</tr>
	<tr class="row8">
		<td class="col0 leftalign"> x?     </td><td class="col1 leftalign"> El de davant de ? pot sortir o no                                  </td>
	</tr>
	<tr class="row9">
		<td class="col0 leftalign"> [abc]  </td><td class="col1 leftalign"> Hi ha d’haver algun caràcter dels de dins                          </td>
	</tr>
	<tr class="row10">
		<td class="col0 leftalign"> [0-9]  </td><td class="col1"> Hi ha d’haver un valor entre el dos especificats, amb aquests inclosos </td>
	</tr>
	<tr class="row11">
		<td class="col0 leftalign"> x{5}   </td><td class="col1 leftalign"> Hi ha d’haver 5 vegades el que hi hagi al davant dels claudàtors      </td>
	</tr>
	<tr class="row12">
		<td class="col0 leftalign"> x{5,}  </td><td class="col1 leftalign"> Hi ha d’haver 5 o més vegades el de davant                         </td>
	</tr>
	<tr class="row13">
		<td class="col0"> x{5,8} </td><td class="col1 leftalign"> Hi ha d’haver entre 5 i 8 vegades el de davant                     </td>
	</tr>
</table></div>
</div>
<p>
Fent servir aquest sistema es poden definir tipus de dades molt personalitzats. Per exemple, podem definir que una dada ha de tenir la forma d’un DNI (8 xifres, un guió i una lletra majúscula) amb aquesta expressió:
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;xs:simpleType</span> <span class="re0">name</span>=<span class="st0">&quot;dni&quot;</span><span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1">    <span class="sc3"><span class="re1">&lt;xs:restriction</span> <span class="re0">base</span>=<span class="st0">&quot;xs:string&quot;</span><span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1">        <span class="sc3"><span class="re1">&lt;xs:pattern</span> <span class="re0">value</span>=<span class="st0">&quot;[0-9]{8}-[A-Z]&quot;</span><span class="re2">/&gt;</span></span></div></li><li class="li1"><div class="de1">    <span class="sc3"><span class="re1">&lt;/xs:restriction<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;/xs:simpleType<span class="re2">&gt;</span></span></span></div></li></ol></pre>

<p>
A part de les restriccions també hi ha l’element <strong>extension</strong>, que serveix per afegir característiques extra als tipus. No té gaire sentit que surti en elements de tipus simple però es pot fer servir, per exemple, per afegir atributs als tipus simples (cosa que els converteix en tipus complexos).
</p>

</div>

<h4><a id="elements_amb_contingut_de_tipus_complex" >Elements amb contingut de tipus complex</a></h4>
<div class="level4">
<div class="iocimportant"><div class="ioccontent">
<p>
Els elements amb contingut de tipus complex són aquells que tenen atributs, contenen altres elements o no tenen contingut.
</p>
</div></div>
<p>
Els elements amb contingut complex han rebut moltes crítiques perquè es consideren massa complicats, però s’han de fer servir perquè en tots els fitxers d’esquema normalment hi haurà un tipus complex: l’arrel del document.
</p>

<p>
Es considera que hi ha quatre grans grups de continguts de tipus complex:
</p>
<ol>
<li class="level1"><div class="li"> Els que en el seu contingut només tenen dades. Per tant, són com els de tipus simples però amb atributs.</div>
</li>
<li class="level1"><div class="li"> Els elements que en el contingut només tenen elements.</div>
</li>
<li class="level1"><div class="li"> Els elements buits.</div>
</li>
<li class="level1"><div class="li"> Els elements amb contingut barrejat.</div>
</li>
</ol>

<p>
Els elements amb tipus complex es defineixen especificant que el tipus de dades de l’element és <code>&lt;xs:complexType&gt;</code>.
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">&quot;classe&quot;</span><span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1">    <span class="sc3"><span class="re1">&lt;xs:complexType<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">          ....</div></li><li class="li1"><div class="de1">    <span class="sc3"><span class="re1">&lt;/xs:complexType<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;/xs:element<span class="re2">&gt;</span></span></span></div></li></ol></pre>
<div class="iocimportant"><div class="ioccontent">
<p>
De la mateixa manera que amb els tipus simples, es poden definir tipus complexos amb nom per reutilitzar-los com a tipus personalitzats.
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;xs:complexType</span> <span class="re0">name</span>=<span class="st0">&quot;curs&quot;</span><span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1">     ... </div></li><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;/xs:complexType<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;xs:element</span> classe <span class="re0">type</span>=<span class="st0">&quot;curs&quot;</span><span class="re2">/&gt;</span></span></div></li></ol></pre>
</div></div>
</div>

<h5><a id="atributs" >Atributs</a></h5>
<div class="level5">

<p>
Una característica bàsica d’XSD és que només els elements de tipus complex poden tenir atributs. En essència no hi ha gaires diferències entre definir un element o un atribut, ja que es fa de la mateixa manera però fent servir l’etiqueta <code>attribute</code>.
</p>

<p>
Els tipus de dades són els mateixos i, per tant, poden tenir tipus bàsics com en l’exemple següent:
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;xs:attribute</span> <span class="re0">name</span>=<span class="st0">&quot;número&quot;</span> <span class="re0">type</span>=<span class="st0">&quot;xs:integer&quot;</span> <span class="re2">/&gt;</span></span></div></li></ol></pre>

<p>
S’hi poden posar restriccions de la mateixa manera que en els elements. En aquest exemple l’atribut <code>any</code> no pot tenir valors superiors a 2011 si es defineix d’aquesta manera:
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;xs:attribute</span> <span class="re0">name</span>=<span class="st0">&quot;any&quot;</span><span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1">    <span class="sc3"><span class="re1">&lt;xs:simpleType<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">        <span class="sc3"><span class="re1">&lt;xs:restriction</span> <span class="re0">base</span>=<span class="st0">&quot;xs:integer&quot;</span><span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1">            <span class="sc3"><span class="re1">&lt;xs:maxInclusive</span> <span class="re0">value</span>=<span class="st0">&quot;2011&quot;</span><span class="re2">/&gt;</span></span></div></li><li class="li1"><div class="de1">        <span class="sc3"><span class="re1">&lt;/xs:restriction<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">    <span class="sc3"><span class="re1">&lt;/xs:simpleType<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;/xs:attribute<span class="re2">&gt;</span></span></span></div></li></ol></pre>
<div class="iocimportant"><div class="ioccontent">
<p>
Tret que s’especifiqui el contrari, els atributs sempre són opcionals.
</p>
</div></div>
<p>
L’etiqueta <code>&lt;attribute&gt;</code> té una sèrie d’atributs que permeten definir característiques extra sobre els atributs (<span class="tabref"><a href="#table42"><span>taula</span></a></span>).
</p>
<div class="ioctable ">
<div class="titletable"><a name="table42"><span>Taula: </span></a>Atributs més importants de xs:attribute</div>
<div class="table"><table class="inline">
	<tr class="row0">
		<th class="col0"> Atribut </th><th class="col1 leftalign"> Ús                                                                                                                   </th>
	</tr>
	<tr class="row1">
		<td class="col0 leftalign"> <code>use</code>     </td><td class="col1"> Permet especificar si l’atribut és obligatori (<code>required</code>), opcional (<code>optional</code>) o bé no es pot fer servir (<code>prohibited</code>). </td>
	</tr>
	<tr class="row2">
		<td class="col0"> <code>default</code> </td><td class="col1 leftalign"> Defineix un valor per defecte.                                                                                        </td>
	</tr>
	<tr class="row3">
		<td class="col0 leftalign"> <code>fixed</code>   </td><td class="col1 leftalign"> Es fa servir per definir valors obligatoris per als atributs.                                                            </td>
	</tr>
	<tr class="row4">
		<td class="col0 leftalign"> <code>form</code>    </td><td class="col1 leftalign"> Permet definir si l’atribut ha d’anar amb l’àlies de l’espai de noms (<code>qualified</code>) o no (<code>unqualified</code>).                                                                                                                     </td>
	</tr>
</table></div>
</div>
<p>
Per exemple, l’atribut <code>any</code> s’haurà d’especificar obligatòriament si es defineix de la manera següent: 
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;xs:attribute</span> <span class="re0">name</span>=<span class="st0">&quot;any&quot;</span> <span class="re0">type</span>=<span class="st0">&quot;xs:integer&quot;</span> <span class="re0">use</span>=<span class="st0">&quot;required&quot;</span> <span class="re2">/&gt;</span></span></div></li></ol></pre>

</div>

<h5><a id="simplecontent" >&#039;simpleContent&#039;</a></h5>
<div class="level5">

<p>
Si l’element només conté text, el contingut de <code>complexType</code> serà un <code>simpleContent</code>. El <code>simpleContent</code> permet definir restriccions o extensions a elements que només tenen dades com a contingut.
</p>

<p>
La diferència més important és que en aquest cas es poden definir atributs en l’element. Els atributs s’afegeixen definint una extensió al tipus fet servir en l’element.
</p>

<p>
En aquest exemple l’element <code>&lt;Mida&gt;</code> té contingut de tipus enter i defineix dos atributs, <code>llargada</code> i <code>amplada</code>, que també són enters.
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;xs:complexType</span> <span class="re0">name</span>=<span class="st0">&quot;Mida&quot;</span><span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1">    <span class="sc3"><span class="re1">&lt;xs:simpleContent<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">        <span class="sc3"><span class="re1">&lt;xs:extension</span> <span class="re0">base</span>=<span class="st0">&quot;xs:integer&quot;</span><span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1">           <span class="sc3"><span class="re1">&lt;xs:atribute</span> <span class="re0">name</span>=<span class="st0">&quot;llargada&quot;</span> <span class="re0">type</span>=<span class="st0">&quot;xs:integer&quot;</span><span class="re2">/&gt;</span></span></div></li><li class="li1"><div class="de1">           <span class="sc3"><span class="re1">&lt;xs:atribute</span> <span class="re0">name</span>=<span class="st0">&quot;amplada&quot;</span> <span class="re0">type</span>=<span class="st0">&quot;xs:integer&quot;</span><span class="re2">/&gt;</span></span></div></li><li class="li1"><div class="de1">        <span class="sc3"><span class="re1">&lt;/xs:extension<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">    <span class="sc3"><span class="re1">&lt;/xs:simpleContent<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;/xs:complexType<span class="re2">&gt;</span></span></span></div></li></ol></pre>

</div>

<h5><a id="contingut_format_per_elements" >Contingut format per elements</a></h5>
<div class="level5">

<p>
Els elements que contenen altres elements també poden ser definits en XSD dins d’un <code>&lt;complexType&gt;</code> i poden ser alguns dels elements de la <span class="tabref"><a href="#table43"><span>taula</span></a></span>.
</p>
<div class="ioctable ">
<div class="titletable"><a name="table43"><span>Taula: </span></a>Elements per definir contingut complex</div>
<div class="table"><table class="inline">
	<tr class="row0">
		<th class="col0 leftalign"> Etiqueta       </th><th class="col1 leftalign"> Serveix per                                                 </th>
	</tr>
	<tr class="row1">
		<td class="col0 leftalign"> <code>sequence</code>       </td><td class="col1"> Especificar el contingut com una llista ordenada d’elements. </td>
	</tr>
	<tr class="row2">
		<td class="col0 leftalign"> <code>choice</code>         </td><td class="col1 leftalign"> Permet especificar elements alternatius.                     </td>
	</tr>
	<tr class="row3">
		<td class="col0 leftalign"> <code>all</code>            </td><td class="col1 leftalign"> Definir el contingut com una llista desordenada d’elements.  </td>
	</tr>
	<tr class="row4">
		<td class="col0"> <code>complexContent</code> </td><td class="col1 leftalign"> Estendre o restringir el contingut complex.                 </td>
	</tr>
</table></div>
</div>
<p>
L’element <code><strong>&lt;sequence&gt;</strong></code> és una de les maneres amb què el llenguatge XSD permet que s’especifiquin els elements que han de formar part del contingut d’un element. Fins i tot en el cas en què només hi hagi una sola etiqueta es pot definir com a una seqüència.
</p>

<p>
La condició més important que tenen és que <strong>els elements del document XML per validar han d’aparèixer en el mateix ordre</strong> en el qual es defineixen en la seqüència.
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">&quot;persona&quot;</span><span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1">    <span class="sc3"><span class="re1">&lt;xs:complexContent<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">        <span class="sc3"><span class="re1">&lt;xs:sequence<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">            <span class="sc3"><span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">&quot;nom&quot;</span> <span class="re0">type</span>=<span class="st0">&quot;xs:string&quot;</span><span class="re2">/&gt;</span></span></div></li><li class="li1"><div class="de1">            <span class="sc3"><span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">&quot;cognom&quot;</span> <span class="re0">type</span>=<span class="st0">&quot;xs:string&quot;</span> <span class="re0">maxOccurs</span>=<span class="st0">&quot;2&quot;</span><span class="re2">/&gt;</span></span></div></li><li class="li1"><div class="de1">            <span class="sc3"><span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">&quot;tipus&quot;</span> <span class="re0">type</span>=<span class="st0">&quot;xs:string&quot;</span> <span class="re2">/&gt;</span></span></div></li><li class="li1"><div class="de1">        <span class="sc3"><span class="re1">&lt;/xs:sequence<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">    <span class="sc3"><span class="re1">&lt;/xs:complexContent<span class="re2">&gt;</span></span></span>  </div></li><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;/xs:element<span class="re2">&gt;</span></span></span></div></li></ol></pre>

<p>
En l’exemple anterior es defineix que abans de l’aparició de &lt;tipus&gt; poden aparèixer un o dos cognoms.
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;persona<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">    <span class="sc3"><span class="re1">&lt;nom<span class="re2">&gt;</span></span></span>Marcel<span class="sc3"><span class="re1">&lt;/nom<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">    <span class="sc3"><span class="re1">&lt;cognom<span class="re2">&gt;</span></span></span>Puig<span class="sc3"><span class="re1">&lt;/cognom<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">    <span class="sc3"><span class="re1">&lt;cognom<span class="re2">&gt;</span></span></span>Lozano<span class="sc3"><span class="re1">&lt;/cognom<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">    <span class="sc3"><span class="re1">&lt;tipus<span class="re2">&gt;</span></span></span>Professor<span class="sc3"><span class="re1">&lt;/tipus<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;/persona<span class="re2">&gt;</span></span></span></div></li></ol></pre>

<p>
No validarà cap contingut si algun element no està exactament en el mateix ordre.
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;persona<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">    <span class="sc3"><span class="re1">&lt;tipus<span class="re2">&gt;</span></span></span>Professor<span class="sc3"><span class="re1">&lt;/tipus<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">    <span class="sc3"><span class="re1">&lt;cognom<span class="re2">&gt;</span></span></span>Puig<span class="sc3"><span class="re1">&lt;/cognom<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">    <span class="sc3"><span class="re1">&lt;nom<span class="re2">&gt;</span></span></span>Marcel<span class="sc3"><span class="re1">&lt;/nom<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;/persona<span class="re2">&gt;</span></span></span></div></li></ol></pre>

<p>
Les seqüències poden contenir dins seu altres seqüències d’elements.
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;xs:schema</span> <span class="re0">xmlns:xs</span>=<span class="st0">&quot;http://www.w3.org/2001/XMLSchema&quot;</span> <span class="re0">elementFormDefault</span>=<span class="st0">&quot;qualified&quot;</span><span class="re2">&gt;</span></span> </div></li><li class="li1"><div class="de1">    <span class="sc3"><span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">&quot;persona&quot;</span><span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1">        <span class="sc3"><span class="re1">&lt;xs:complexType<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">            <span class="sc3"><span class="re1">&lt;xs:sequence<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">                <span class="sc3"><span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">&quot;nomcomplet&quot;</span><span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1">                    <span class="sc3"><span class="re1">&lt;xs:complexType<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">                        <span class="sc3"><span class="re1">&lt;xs:sequence<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">                            <span class="sc3"><span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">&quot;nom&quot;</span> <span class="re0">type</span>=<span class="st0">&quot;xs:string&quot;</span><span class="re2">/&gt;</span></span></div></li><li class="li1"><div class="de1">                            <span class="sc3"><span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">&quot;cognom&quot;</span> <span class="re0">type</span>=<span class="st0">&quot;xs:string&quot;</span> <span class="re0">maxOccurs</span>=<span class="st0">&quot;2&quot;</span><span class="re2">/&gt;</span></span> </div></li><li class="li1"><div class="de1">                        <span class="sc3"><span class="re1">&lt;/xs:sequence<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">                    <span class="sc3"><span class="re1">&lt;/xs:complexType<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">                <span class="sc3"><span class="re1">&lt;/xs:element<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">                <span class="sc3"><span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">&quot;professió&quot;</span> <span class="re0">type</span>=<span class="st0">&quot;xs:string&quot;</span><span class="re2">/&gt;</span></span></div></li><li class="li1"><div class="de1">            <span class="sc3"><span class="re1">&lt;/xs:sequence<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">        <span class="sc3"><span class="re1">&lt;/xs:complexType<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">    <span class="sc3"><span class="re1">&lt;/xs:element<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;/xs:schema<span class="re2">&gt;</span></span></span></div></li></ol></pre>

<p>
L’element <code><strong>&lt;choice&gt;</strong></code> serveix per fer que s’hagi de triar una de les alternatives de les que es presenten dins seu. 
</p>

<p>
En aquest exemple l’element <code>persona</code> podrà contenir o bé l’etiqueta <code>&lt;nomCognoms&gt;</code> o bé <code>&lt;dni&gt;</code>, però no totes dues.
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;xs:complexType</span> <span class="re0">nom</span>=<span class="st0">&quot;persona&quot;</span><span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1">  <span class="sc3"><span class="re1">&lt;xs:choice<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">      <span class="sc3"><span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">&quot;nomCognoms&quot;</span> <span class="re0">type</span>=<span class="st0">&quot;xs:string&quot;</span><span class="re2">/&gt;</span></span></div></li><li class="li1"><div class="de1">      <span class="sc3"><span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">&quot;dni&quot;</span> <span class="re0">type</span>=<span class="st0">&quot;xs:string&quot;</span><span class="re2">/&gt;</span></span></div></li><li class="li1"><div class="de1">  <span class="sc3"><span class="re1">&lt;/xs:choice<span class="re2">&gt;</span></span></span></div></li></ol></pre>

<p>
Entre les alternatives hi pot haver seqüències o altres elements <code>&lt;choice&gt;</code>. La definició següent és un exemple més elaborat que l’anterior i permet que es pugui triar entre els elements <code>&lt;nom&gt;</code> i <code>&lt;cognom&gt;</code> o <code>&lt;dni&gt;</code>.
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;xs:choice<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">    <span class="sc3"><span class="re1">&lt;xs:sequence<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">        <span class="sc3"><span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">&quot;nom&quot;</span> <span class="re0">type</span>=<span class="st0">&quot;xs:string&quot;</span><span class="re2">/&gt;</span></span></div></li><li class="li1"><div class="de1">        <span class="sc3"><span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">&quot;cognom&quot;</span> <span class="re0">type</span>=<span class="st0">&quot;xs:string&quot;</span> <span class="re0">maxOccurs</span>=<span class="st0">&quot;2&quot;</span><span class="re2">/&gt;</span></span></div></li><li class="li1"><div class="de1">    <span class="sc3"><span class="re1">&lt;/xs:sequence<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">    <span class="sc3"><span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">&quot;dni&quot;</span> <span class="re0">type</span>=<span class="st0">&quot;xs:string&quot;</span><span class="re2">/&gt;</span></span></div></li><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;/xs:choice<span class="re2">&gt;</span></span></span></div></li></ol></pre>

<p>
La diferència més important entre l’element <code><strong>&lt;all&gt;</strong></code> i <code>&lt;sequence&gt;</code> és l’ordre. L’element <code>&lt;all&gt;</code> permet especificar una seqüència d’elements però permet que s’especifiquin en qualsevol ordre.
</p>

<p>
Per tant, si definim l’element <code>&lt;persona&gt;</code> de la manera següent:
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">&quot;persona&quot;</span><span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1">    <span class="sc3"><span class="re1">&lt;xs:complexType<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">        <span class="sc3"><span class="re1">&lt;xs:all<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">            <span class="sc3"><span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">&quot;nom&quot;</span><span class="re2">/&gt;</span></span></div></li><li class="li1"><div class="de1">            <span class="sc3"><span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">&quot;cognom&quot;</span><span class="re2">/&gt;</span></span></div></li><li class="li1"><div class="de1">        <span class="sc3"><span class="re1">&lt;/xs:all<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">    <span class="sc3"><span class="re1">&lt;/xs:complexType<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;/xs:element<span class="re2">&gt;</span></span></span></div></li></ol></pre>

<p>
Ens servirà per validar tant aquest document:
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;persona<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">    <span class="sc3"><span class="re1">&lt;nom<span class="re2">&gt;</span></span></span>Pere<span class="sc3"><span class="re1">&lt;/nom<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">    <span class="sc3"><span class="re1">&lt;cognom<span class="re2">&gt;</span></span></span>Garcia<span class="sc3"><span class="re1">&lt;/nom<span class="re2">&gt;</span></span></span></div></li></ol></pre>

<p>
com aquest:
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;persona<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">    <span class="sc3"><span class="re1">&lt;cognom<span class="re2">&gt;</span></span></span>Garcia<span class="sc3"><span class="re1">&lt;/nom<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">    <span class="sc3"><span class="re1">&lt;nom<span class="re2">&gt;</span></span></span>Pere<span class="sc3"><span class="re1">&lt;/nom<span class="re2">&gt;</span></span></span></div></li></ol></pre>

<p>
Però sempre s’han de tenir en compte les limitacions d’aquest element que no eren presents en les seqüències ordenades:
</p>
<ul>
<li class="level1"><div class="li"> Dins seu només hi pot haver elements. No hi pot haver ni seqüències, ni alternatives.</div>
</li>
<li class="level1"><div class="li"> No es pot fer servir la cardinalitat en els elements que contingui, ja que provocaria un problema de <em>no-determinisme</em>.</div>
</li>
</ul>

<p>

</p>

<p>
Per tant, l’exemple següent no és correcte, ja que es demana que <code>&lt;cognom&gt;</code> pugui sortir dues vegades.
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;xs:all<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">    <span class="sc3"><span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">&quot;nom&quot;</span> <span class="re0">type</span>=<span class="st0">&quot;xs:string&quot;</span><span class="re2">/&gt;</span></span></div></li><li class="li1"><div class="de1">    <span class="sc3"><span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">&quot;cognom&quot;</span> <span class="re0">maxOccurs</span>=<span class="st0">&quot;2&quot;</span> <span class="re0">type</span>=<span class="st0">&quot;xs:string&quot;</span><span class="re2">/&gt;</span></span></div></li><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;/xs:all<span class="re2">&gt;</span></span></span></div></li></ol></pre>

<p>
Una possible manera de permetre que es puguin especificar el nom i els dos cognoms en qualsevol ordre seria fer el següent:
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;xs:complexType<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">    <span class="sc3"><span class="re1">&lt;xs:choice<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">        <span class="sc3"><span class="re1">&lt;xs:sequence<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">            <span class="sc3"><span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">&quot;nom&quot;</span> <span class="re0">type</span>=<span class="st0">&quot;xs:string&quot;</span><span class="re2">/&gt;</span></span></div></li><li class="li1"><div class="de1">            <span class="sc3"><span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">&quot;cognom&quot;</span> <span class="re0">type</span>=<span class="st0">&quot;xs:string&quot;</span> <span class="re0">maxOccurs</span>=<span class="st0">&quot;2&quot;</span><span class="re2">/&gt;</span></span></div></li><li class="li1"><div class="de1">        <span class="sc3"><span class="re1">&lt;/xs:sequence<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">        <span class="sc3"><span class="re1">&lt;xs:sequence<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">            <span class="sc3"><span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">&quot;cognom&quot;</span> <span class="re0">type</span>=<span class="st0">&quot;xs:string&quot;</span> <span class="re0">maxOccurs</span>=<span class="st0">&quot;2&quot;</span><span class="re2">/&gt;</span></span></div></li><li class="li1"><div class="de1">            <span class="sc3"><span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">&quot;nom&quot;</span> <span class="re0">type</span>=<span class="st0">&quot;xs:string&quot;</span><span class="re2">/&gt;</span></span></div></li><li class="li1"><div class="de1">        <span class="sc3"><span class="re1">&lt;/xs:sequence<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">    <span class="sc3"><span class="re1">&lt;/xs:choice<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;/xs:complexType<span class="re2">&gt;</span></span></span></div></li></ol></pre>

</div>

<h5><a id="complexcontent" >&#039;complexContent&#039;</a></h5>
<div class="level5">

<p>
L’etiqueta <code>complexContent</code> permet definir <em>extensions</em> o <em>restriccions</em> a un tipus complex que contingui contingut barrejat o només elements.
</p>

<p>
Això fa que amb una extensió es pugui ampliar un contingut complex ja existent o restringir-ne els continguts.
</p>

<p>
Per exemple, si ja hi ha definit un tipus de dades <code>nomComplet</code> en què hi ha els elements <code>&lt;nom&gt;</code> i <code>&lt;cognom&gt;</code> se’n pot reutilitzar la definició per definir un nou tipus de dades, <code>agenda</code>, en què s’afegeixi l’adreça de correu electrònic.
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;xs:complexType</span> <span class="re0">name</span>=<span class="st0">&quot;nomComplet&quot;</span><span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1">  <span class="sc3"><span class="re1">&lt;xs:sequence<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">      <span class="sc3"><span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">&quot;nom&quot;</span> <span class="re0">type</span>=<span class="st0">&quot;xs:string&quot;</span><span class="re2">/&gt;</span></span></div></li><li class="li1"><div class="de1">      <span class="sc3"><span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">&quot;cognom&quot;</span> <span class="re0">type</span>=<span class="st0">&quot;xs:string&quot;</span> <span class="re0">maxOccurs</span>=<span class="st0">&quot;2&quot;</span><span class="re2">/&gt;</span></span></div></li><li class="li1"><div class="de1">  <span class="sc3"><span class="re1">&lt;/xs:sequence<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;/xs:complexType<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;xs:complexType</span> <span class="re0">name</span>=<span class="st0">&quot;agenda&quot;</span><span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1">    <span class="sc3"><span class="re1">&lt;xs:complexContent<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">        <span class="sc3"><span class="re1">&lt;xs:extension</span> <span class="re0">base</span>=<span class="st0">&quot;nomComplet&quot;</span><span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1">            <span class="sc3"><span class="re1">&lt;xs:sequence<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">                 <span class="sc3"><span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">&quot;email&quot;</span> <span class="re0">type</span>=<span class="st0">&quot;xs:string&quot;</span> <span class="re2">/&gt;</span></span></div></li><li class="li1"><div class="de1">            <span class="sc3"><span class="re1">&lt;/xs:sequence<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">        <span class="sc3"><span class="re1">&lt;/xs:extension<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">    <span class="sc3"><span class="re1">&lt;/xs:complexContent<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;/xs:complexType<span class="re2">&gt;</span></span></span></div></li></ol></pre>

<p>
D’aquesta manera es podrà definir un element de tipus agenda:
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">&quot;persona&quot;</span> <span class="re0">type</span>=<span class="st0">&quot;agenda&quot;</span><span class="re2">/&gt;</span></span></div></li></ol></pre>

<p>
que haurà de tenir els tres elements <code>&lt;nom&gt;</code>, <code>&lt;cognom&gt;</code>, i <code>&lt;email&gt;</code>:
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;persona<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">    <span class="sc3"><span class="re1">&lt;nom<span class="re2">&gt;</span></span></span>Pere<span class="sc3"><span class="re1">&lt;/nom<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">    <span class="sc3"><span class="re1">&lt;cognom<span class="re2">&gt;</span></span></span>Garcia<span class="sc3"><span class="re1">&lt;/cognom<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">    <span class="sc3"><span class="re1">&lt;email<span class="re2">&gt;</span></span></span>pgarcia@ioc.cat<span class="sc3"><span class="re1">&lt;/email<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;/persona<span class="re2">&gt;</span></span></span></div></li></ol></pre>

</div>

<h5><a id="elements_sense_contingut" >Elements sense contingut</a></h5>
<div class="level5">

<p>
Per a XSD els elements sense contingut són sempre de tipus complex. En la definició simplement no s’especifica cap contingut i tindrem un element buit. 
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">&quot;delegat&quot;</span><span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1">    <span class="sc3"><span class="re1">&lt;xs:complexType</span> <span class="re2">/&gt;</span></span></div></li><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;/xs:element<span class="re2">&gt;</span></span></span></div></li></ol></pre>

<p>
La definició permet definir l’element d’aquesta manera:
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;delegat</span> <span class="re2">/&gt;</span></span></div></li></ol></pre>

<p>
Si l’element necessita atributs simplement s’especifiquen dins del <code>complexType</code>.
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">&quot;delegat&quot;</span><span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1">    <span class="sc3"><span class="re1">&lt;xs:complexType<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">        <span class="sc3"><span class="re1">&lt;xs:attribute</span> <span class="re0">name</span>=<span class="st0">&quot;any&quot;</span> <span class="re0">use</span>=<span class="st0">&quot;required&quot;</span> <span class="re0">type</span>=<span class="st0">&quot;xs:gYear&quot;</span><span class="re2">/&gt;</span></span></div></li><li class="li1"><div class="de1">    <span class="sc3"><span class="re1">&lt;/xs:complexType<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;/xs:element<span class="re2">&gt;</span></span></span></div></li></ol></pre>

<p>
I ja es podrà definir l’atribut en l’element buit:
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;delegat</span> <span class="re0">any</span>=<span class="st0">&quot;2012&quot;</span><span class="re2">/&gt;</span></span></div></li></ol></pre>

</div>

<h5><a id="contingut_barrejat1" >Contingut barrejat</a></h5>
<div class="level5">

<p>
Els elements amb contingut barrejat són els elements que tenen de contingut tant elements com text. Es va pensar per poder incloure elements enmig d’un text narratiu.
</p>

<p>
En XSD el contingut barrejat es defineix posant l’atribut <code>mixed=“true”</code> en la definició del l’element <code>&lt;complexType&gt;</code>.
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">&quot;carta&quot;</span><span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1">    <span class="sc3"><span class="re1">&lt;xs:complexType</span> <span class="re0">mixed</span>=<span class="st0">&quot;true&quot;</span><span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1">        <span class="sc3"><span class="re1">&lt;xs:sequence<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">            <span class="sc3"><span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">&quot;nom&quot;</span> <span class="re0">type</span>=<span class="st0">&quot;xs:string&quot;</span><span class="re2">/&gt;</span></span></div></li><li class="li1"><div class="de1">            <span class="sc3"><span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">&quot;dia&quot;</span> <span class="re0">type</span>=<span class="st0">&quot;xs:gDay&quot;</span><span class="re2">/&gt;</span></span></div></li><li class="li1"><div class="de1">        <span class="sc3"><span class="re1">&lt;/xs:sequence<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">    <span class="sc3"><span class="re1">&lt;/xs:complexType<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;/xs:element<span class="re2">&gt;</span></span></span></div></li></ol></pre>

<p>
Això ens permetria validar un contingut com aquest:
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;carta<span class="re2">&gt;</span></span></span>Estimat senyor <span class="sc3"><span class="re1">&lt;nom<span class="re2">&gt;</span></span></span>Pere<span class="sc3"><span class="re1">&lt;nom<span class="re2">&gt;</span></span></span>:</div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1">Li envio aquesta carta per recordar-li que hem quedat per</div></li><li class="li1"><div class="de1">trobar-nos el dia <span class="sc3"><span class="re1">&lt;dia<span class="re2">&gt;</span></span></span>12<span class="sc3"><span class="re1">&lt;/dia<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;/carta<span class="re2">&gt;</span></span></span></div></li></ol></pre>

</div>

<h3><a id="exemple_de_creacio_d_un_xsd" >Exemple de creació d&#039;un XSD</a></h3>
<div class="level3">

<p>
Es poden crear definicions de vocabularis XSD a partir de la idea del que volem que continguin les dades o bé a partir d’un fitxer XML de mostra. 
</p>

</div>

<h4><a id="enunciat1" >Enunciat</a></h4>
<div class="level4">

<p>
En un centre en què només s’imparteixen els cicles formatius d’SMX i ASIX, quan han d’entrar les notes als alumnes ho fan creant un arxiu XML com el següent:
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;?xml</span> <span class="re0">version</span>=<span class="st0">&quot;1.0&quot;</span> <span class="re2">?&gt;</span></span></div></li><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;classe</span> <span class="re0">modul</span>=<span class="st0">&quot;3&quot;</span> <span class="re0">nommodul</span>=<span class="st0">&quot;Programació bàsica&quot;</span><span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1">    <span class="sc3"><span class="re1">&lt;curs</span> <span class="re0">numero</span>=<span class="st0">&quot;1&quot;</span> <span class="re0">especialitat</span>=<span class="st0">&quot;ASIX&quot;</span><span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1">        <span class="sc3"><span class="re1">&lt;professor<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">            <span class="sc3"><span class="re1">&lt;nom<span class="re2">&gt;</span></span></span>Marcel<span class="sc3"><span class="re1">&lt;/nom<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">            <span class="sc3"><span class="re1">&lt;cognom<span class="re2">&gt;</span></span></span>Puig<span class="sc3"><span class="re1">&lt;/cognom<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">        <span class="sc3"><span class="re1">&lt;/professor<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">        <span class="sc3"><span class="re1">&lt;alumnes<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">            <span class="sc3"><span class="re1">&lt;alumne<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">                <span class="sc3"><span class="re1">&lt;nom<span class="re2">&gt;</span></span></span>Filomeno<span class="sc3"><span class="re1">&lt;/nom<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">                <span class="sc3"><span class="re1">&lt;cognom<span class="re2">&gt;</span></span></span>Garcia<span class="sc3"><span class="re1">&lt;/cognom<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">                <span class="sc3"><span class="re1">&lt;nota<span class="re2">&gt;</span></span></span>5<span class="sc3"><span class="re1">&lt;/nota<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">            <span class="sc3"><span class="re1">&lt;/alumne<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">            <span class="sc3"><span class="re1">&lt;alumne</span> <span class="re0">delegat</span>=<span class="st0">&quot;si&quot;</span><span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1">                <span class="sc3"><span class="re1">&lt;nom<span class="re2">&gt;</span></span></span>Frederic<span class="sc3"><span class="re1">&lt;/nom<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">                <span class="sc3"><span class="re1">&lt;cognom<span class="re2">&gt;</span></span></span>Pi<span class="sc3"><span class="re1">&lt;/cognom<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">                <span class="sc3"><span class="re1">&lt;nota<span class="re2">&gt;</span></span></span>3<span class="sc3"><span class="re1">&lt;/nota<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">            <span class="sc3"><span class="re1">&lt;/alumne<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">            <span class="sc3"><span class="re1">&lt;alumne<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">                <span class="sc3"><span class="re1">&lt;nom<span class="re2">&gt;</span></span></span>Manel<span class="sc3"><span class="re1">&lt;/nom<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">                <span class="sc3"><span class="re1">&lt;cognom<span class="re2">&gt;</span></span></span>Puigdevall<span class="sc3"><span class="re1">&lt;/cognom<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">                <span class="sc3"><span class="re1">&lt;nota<span class="re2">&gt;</span></span></span>8<span class="sc3"><span class="re1">&lt;/nota<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">            <span class="sc3"><span class="re1">&lt;/alumne<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">        <span class="sc3"><span class="re1">&lt;/alumnes<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">    <span class="sc3"><span class="re1">&lt;/curs<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;/classe<span class="re2">&gt;</span></span></span> </div></li></ol></pre>

<p>
A la secretaria necessiten que es generi la definició del vocabulari en XSD per comprovar que els fitxers que reben són correctes.
</p>

</div>

<h4><a id="resolucio1" >Resolució</a></h4>
<div class="level4">

<p>
A l’hora de dissenyar un esquema des d’un XML sempre s’ha de partir d’un fitxer XML que tingui totes les opcions que poden sortir en cada element, o el resultat no serà vàlid per a tots els fitxers.
</p>

<p>
Una de les coses que s’han de tenir en compte a l’hora de fer un exercici com aquest és que no hi ha una manera única de fer-lo. Es pot fer amb tipus personalitzats, sense tipus personalitzats, a vegades es pot resoldre combinant uns elements però també amb uns altres, etc. Per tant, la solució que s’oferirà aquí és només una de les possibles solucions.
</p>

<p>
Una altra cosa que s’ha de tenir en compte és que els editors XML solen oferir una manera gràfica de crear XSD que permet crear esquemes de manera més senzilla, com es pot veure en la <span class="figref"><a href="#fig105"><span>figura</span></a></span>.
</p>
<div class="iocfigure"><a name="fig105"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

Creació d’esquemes en mode disseny de l’oXygen XML Editor

</figcaption><img src="../media/xsddessign.png" alt="" /></figure>
</div>
</div>

<h5><a id="analisi" >Anàlisi</a></h5>
<div class="level5">

<p>
La primera fase normalment consisteix a analitzar el fitxer per determinar si hi ha parts que poden ser susceptibles de formar un tipus de dades. En l’exercici es pot veure que tant per al professor com per als alumnes les dades que contenen són semblants (els alumnes afegeixen la nota), i per tant es pot crear un tipus de dades que farà més simple el disseny final. 
</p>

<p>
Per tant, en l’arrel podem crear el tipus complex <code>persona</code>, que contindrà el nom i el cognom.
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;xs:complexType</span> <span class="re0">name</span>=<span class="st0">&quot;persona&quot;</span><span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1">    <span class="sc3"><span class="re1">&lt;xs:sequence<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">        <span class="sc3"><span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">&quot;nom&quot;</span> <span class="re0">type</span>=<span class="st0">&quot;xs:string&quot;</span><span class="re2">/&gt;</span></span></div></li><li class="li1"><div class="de1">        <span class="sc3"><span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">&quot;cognom&quot;</span> <span class="re0">type</span>=<span class="st0">&quot;xs:string&quot;</span><span class="re2">/&gt;</span></span></div></li><li class="li1"><div class="de1">    <span class="sc3"><span class="re1">&lt;/xs:sequence<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;/xs:complexType<span class="re2">&gt;</span></span></span></div></li></ol></pre>

<p>
Com que els alumnes són iguals però amb un element extra es pot aprofitar el tipus <code>persona</code> estenent-lo.
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;xs:complexType</span> <span class="re0">name</span>=<span class="st0">&quot;estudiant&quot;</span><span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1">    <span class="sc3"><span class="re1">&lt;xs:complexContent<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">        <span class="sc3"><span class="re1">&lt;xs:extension</span> <span class="re0">base</span>=<span class="st0">&quot;persona&quot;</span><span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1">            <span class="sc3"><span class="re1">&lt;xs:sequence<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">                <span class="sc3"><span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">&quot;nota&quot;</span><span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1">                    ...</div></li><li class="li1"><div class="de1">                <span class="sc3"><span class="re1">&lt;/xs:element<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">            <span class="sc3"><span class="re1">&lt;/xs:sequence<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">        <span class="sc3"><span class="re1">&lt;/xs:extension<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">    <span class="sc3"><span class="re1">&lt;/xs:complexContent<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;/xs:complexType<span class="re2">&gt;</span></span></span></div></li></ol></pre>

<p>
Les notes no poden tenir tots els valors (només d’1 a 10), o sigui, que es pot afegir una restricció al tipus enter.
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">&quot;nota&quot;</span><span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1">    <span class="sc3"><span class="re1">&lt;xs:simpleType<span class="re2">&gt;</span></span></span>       </div></li><li class="li1"><div class="de1">         <span class="sc3"><span class="re1">&lt;xs:restriction</span> <span class="re0">base</span>=<span class="st0">&quot;xs:integer&quot;</span><span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1">                <span class="sc3"><span class="re1">&lt;xs:maxInclusive</span> <span class="re0">value</span>=<span class="st0">&quot;10&quot;</span><span class="re2">/&gt;</span></span></div></li><li class="li1"><div class="de1">                <span class="sc3"><span class="re1">&lt;xs:minInclusive</span> <span class="re0">value</span>=<span class="st0">&quot;1&quot;</span><span class="re2">/&gt;</span></span></div></li><li class="li1"><div class="de1">         <span class="sc3"><span class="re1">&lt;/xs:restriction<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">    <span class="sc3"><span class="re1">&lt;/xs:simpleType<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;/xs:element<span class="re2">&gt;</span></span></span></div></li></ol></pre>

</div>

<h5><a id="desenvolupament" >Desenvolupament</a></h5>
<div class="level5">

<p>
L’arrel sempre serà de tipus complex perquè conté atributs i tres elements, de manera que es pot començar la declaració com una seqüència d’elements.
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">&quot;classe&quot;</span><span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1">    <span class="sc3"><span class="re1">&lt;xs:complexType<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">        <span class="sc3"><span class="re1">&lt;xs:sequence<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">            <span class="sc3"><span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">&quot;curs&quot;</span><span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1">                ... </div></li><li class="li1"><div class="de1">            <span class="sc3"><span class="re1">&lt;/xs:element<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">            <span class="sc3"><span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">&quot;professor&quot;</span> <span class="re0">type</span>=<span class="st0">&quot;persona&quot;</span><span class="re2">/&gt;</span></span></div></li><li class="li1"><div class="de1">            <span class="sc3"><span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">&quot;alumnes&quot;</span><span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1">                 ... </div></li><li class="li1"><div class="de1">            <span class="sc3"><span class="re1">&lt;/xs:element<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">        <span class="sc3"><span class="re1">&lt;/xs:sequence<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">    <span class="sc3"><span class="re1">&lt;/xs:complexType<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;/xs:element<span class="re2">&gt;</span></span></span></div></li></ol></pre>

<p>
S’han deixat els elements <code>&lt;curs&gt;</code> i <code>&lt;alumnes&gt;</code> per desenvolupar-los, mentre que l’element <code>&lt;professor&gt;</code> ja es pot tancar perquè s’ha definit el tipus <code>persona</code>.
</p>

<p>
L’element <code>&lt;curs&gt;</code> no té contingut i, per tant, serà de tipus complex. A més, s’hi han de definir dos atributs.
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">&quot;curs&quot;</span><span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1">    <span class="sc3"><span class="re1">&lt;xs:complexType<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">        <span class="sc3"><span class="re1">&lt;xs:attribute</span> <span class="re0">name</span>=<span class="st0">&quot;numero&quot;</span> <span class="re0">use</span>=<span class="st0">&quot;required&quot;</span><span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1">            ... </div></li><li class="li1"><div class="de1">        <span class="sc3"><span class="re1">&lt;/xs:attribute<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">        <span class="sc3"><span class="re1">&lt;xs:attribute</span> <span class="re0">name</span>=<span class="st0">&quot;especialitat&quot;</span> <span class="re0">use</span>=<span class="st0">&quot;required&quot;</span><span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1">            ... </div></li><li class="li1"><div class="de1">        <span class="sc3"><span class="re1">&lt;/xs:attribute<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">    <span class="sc3"><span class="re1">&lt;/xs:complexType<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;/xs:element<span class="re2">&gt;</span></span></span></div></li></ol></pre>

<p>
Els atributs s’han de desenvolupar perquè no poden tenir tots els valors:
</p>
<ul>
<li class="level1"><div class="li"> <code>numero</code> només pot ser “1” o “2”.  </div>
</li>
<li class="level1"><div class="li"> <code>especialitat</code> serà “SMX” o “ASIX”.</div>
</li>
</ul>

<p>
La manera més adequada per fer-ho serà restringir els valors amb una enumeració.
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;xs:attribute</span> <span class="re0">name</span>=<span class="st0">&quot;numero&quot;</span> <span class="re0">use</span>=<span class="st0">&quot;required&quot;</span><span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1">    <span class="sc3"><span class="re1">&lt;xs:simpleType<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">        <span class="sc3"><span class="re1">&lt;xs:restriction</span> <span class="re0">base</span>=<span class="st0">&quot;xs:integer&quot;</span><span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1">            <span class="sc3"><span class="re1">&lt;xs:enumeration</span> <span class="re0">value</span>=<span class="st0">&quot;1&quot;</span><span class="re2">/&gt;</span></span></div></li><li class="li1"><div class="de1">            <span class="sc3"><span class="re1">&lt;xs:enumeration</span> <span class="re0">value</span>=<span class="st0">&quot;2&quot;</span><span class="re2">/&gt;</span></span></div></li><li class="li1"><div class="de1">        <span class="sc3"><span class="re1">&lt;/xs:restriction<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">    <span class="sc3"><span class="re1">&lt;/xs:simpleType<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;/xs:attribute<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;xs:attribute</span> <span class="re0">name</span>=<span class="st0">&quot;especialitat&quot;</span> <span class="re0">use</span>=<span class="st0">&quot;required&quot;</span><span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1">    <span class="sc3"><span class="re1">&lt;xs:simpleType<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">        <span class="sc3"><span class="re1">&lt;xs:restriction</span> <span class="re0">base</span>=<span class="st0">&quot;xs:string&quot;</span><span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1">            <span class="sc3"><span class="re1">&lt;xs:enumeration</span> <span class="re0">value</span>=<span class="st0">&quot;ASIX&quot;</span><span class="re2">/&gt;</span></span></div></li><li class="li1"><div class="de1">            <span class="sc3"><span class="re1">&lt;xs:enumeration</span> <span class="re0">value</span>=<span class="st0">&quot;SMX&quot;</span><span class="re2">/&gt;</span></span></div></li><li class="li1"><div class="de1">        <span class="sc3"><span class="re1">&lt;/xs:restriction<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">    <span class="sc3"><span class="re1">&lt;/xs:simpleType<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;/xs:attribute<span class="re2">&gt;</span></span></span>                            </div></li></ol></pre>

<p>
Ja només queda per desenvolupar <code>&lt;alumnes&gt;</code>, que té una repetició d’elements <code>&lt;alumne&gt;</code>, del qual ja n’hi ha un tipus.
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">&quot;alumne&quot;</span><span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1">    <span class="sc3"><span class="re1">&lt;xs:complexType<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">        <span class="sc3"><span class="re1">&lt;xs:sequence<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">            <span class="sc3"><span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">&quot;alumne&quot;</span> <span class="re0">type</span>=<span class="st0">&quot;estudiant&quot;</span></span></div></li><li class="li1"><div class="de1"><span class="sc3">                        <span class="re0">maxOccurs</span>=<span class="st0">&quot;unbounded&quot;</span> <span class="re0">minOccurs</span>=<span class="st0">&quot;1&quot;</span><span class="re2">/&gt;</span></span></div></li><li class="li1"><div class="de1">        <span class="sc3"><span class="re1">&lt;/xs:sequence<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">    <span class="sc3"><span class="re1">&lt;/xs:complexType<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;/xs:element<span class="re2">&gt;</span></span></span></div></li></ol></pre>

<p>
El resultat final serà:
</p>
<pre class="code xml"><ol><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;?xml</span> <span class="re0">version</span>=<span class="st0">&quot;1.0&quot;</span> <span class="re0">encoding</span>=<span class="st0">&quot;UTF-8&quot;</span><span class="re2">?&gt;</span></span></div></li><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;xs:schema</span> <span class="re0">xmlns:xs</span>=<span class="st0">&quot;http://www.w3.org/2001/XMLSchema&quot;</span><span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;xs:complexType</span> <span class="re0">name</span>=<span class="st0">&quot;persona&quot;</span><span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1">    <span class="sc3"><span class="re1">&lt;xs:sequence<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">        <span class="sc3"><span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">&quot;nom&quot;</span> <span class="re0">type</span>=<span class="st0">&quot;xs:string&quot;</span><span class="re2">/&gt;</span></span></div></li><li class="li1"><div class="de1">        <span class="sc3"><span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">&quot;cognom&quot;</span> <span class="re0">type</span>=<span class="st0">&quot;xs:string&quot;</span><span class="re2">/&gt;</span></span></div></li><li class="li1"><div class="de1">    <span class="sc3"><span class="re1">&lt;/xs:sequence<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;/xs:complexType<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;xs:complexType</span> <span class="re0">name</span>=<span class="st0">&quot;estudiant&quot;</span><span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1">    <span class="sc3"><span class="re1">&lt;xs:complexContent<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">        <span class="sc3"><span class="re1">&lt;xs:extension</span> <span class="re0">base</span>=<span class="st0">&quot;persona&quot;</span><span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1">            <span class="sc3"><span class="re1">&lt;xs:sequence<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">                <span class="sc3"><span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">&quot;nota&quot;</span><span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1">                    <span class="sc3"><span class="re1">&lt;xs:simpleType<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">                        <span class="sc3"><span class="re1">&lt;xs:restriction</span> <span class="re0">base</span>=<span class="st0">&quot;xs:integer&quot;</span><span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1">                            <span class="sc3"><span class="re1">&lt;xs:maxInclusive</span> <span class="re0">value</span>=<span class="st0">&quot;10&quot;</span><span class="re2">/&gt;</span></span></div></li><li class="li1"><div class="de1">                            <span class="sc3"><span class="re1">&lt;xs:minInclusive</span> <span class="re0">value</span>=<span class="st0">&quot;1&quot;</span><span class="re2">/&gt;</span></span></div></li><li class="li1"><div class="de1">                        <span class="sc3"><span class="re1">&lt;/xs:restriction<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">                    <span class="sc3"><span class="re1">&lt;/xs:simpleType<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">                <span class="sc3"><span class="re1">&lt;/xs:element<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">            <span class="sc3"><span class="re1">&lt;/xs:sequence<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">            <span class="sc3"><span class="re1">&lt;xs:attribute</span> <span class="re0">name</span>=<span class="st0">&quot;delegat&quot;</span> <span class="re0">use</span>=<span class="st0">&quot;optional&quot;</span><span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1">                <span class="sc3"><span class="re1">&lt;xs:simpleType<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">                    <span class="sc3"><span class="re1">&lt;xs:restriction</span> <span class="re0">base</span>=<span class="st0">&quot;xs:string&quot;</span><span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1">                        <span class="sc3"><span class="re1">&lt;xs:enumeration</span> <span class="re0">value</span>=<span class="st0">&quot;si&quot;</span><span class="re2">/&gt;</span></span></div></li><li class="li1"><div class="de1">                    <span class="sc3"><span class="re1">&lt;/xs:restriction<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">                <span class="sc3"><span class="re1">&lt;/xs:simpleType<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">            <span class="sc3"><span class="re1">&lt;/xs:attribute<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">        <span class="sc3"><span class="re1">&lt;/xs:extension<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">    <span class="sc3"><span class="re1">&lt;/xs:complexContent<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;/xs:complexType<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">&nbsp;</div></li><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">&quot;classe&quot;</span><span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1">    <span class="sc3"><span class="re1">&lt;xs:complexType<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">        <span class="sc3"><span class="re1">&lt;xs:sequence<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">            <span class="sc3"><span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">&quot;curs&quot;</span><span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1">                <span class="sc3"><span class="re1">&lt;xs:complexType<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">                    <span class="sc3"><span class="re1">&lt;xs:sequence<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">                        <span class="sc3"><span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">&quot;professor&quot;</span> <span class="re0">type</span>=<span class="st0">&quot;persona&quot;</span><span class="re2">/&gt;</span></span></div></li><li class="li1"><div class="de1">                        <span class="sc3"><span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">&quot;alumnes&quot;</span><span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1">                            <span class="sc3"><span class="re1">&lt;xs:complexType<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">                                <span class="sc3"><span class="re1">&lt;xs:sequence<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">                                    <span class="sc3"><span class="re1">&lt;xs:element</span> <span class="re0">name</span>=<span class="st0">&quot;alumne&quot;</span> <span class="re0">type</span>=<span class="st0">&quot;estudiant&quot;</span> <span class="re0">maxOccurs</span>=<span class="st0">&quot;unbounded&quot;</span> <span class="re2">/&gt;</span></span></div></li><li class="li1"><div class="de1">                                <span class="sc3"><span class="re1">&lt;/xs:sequence<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">                            <span class="sc3"><span class="re1">&lt;/xs:complexType<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">                        <span class="sc3"><span class="re1">&lt;/xs:element<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">                    <span class="sc3"><span class="re1">&lt;/xs:sequence<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">                    <span class="sc3"><span class="re1">&lt;xs:attribute</span> <span class="re0">name</span>=<span class="st0">&quot;numero&quot;</span> <span class="re0">use</span>=<span class="st0">&quot;required&quot;</span><span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1">                        <span class="sc3"><span class="re1">&lt;xs:simpleType<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">                            <span class="sc3"><span class="re1">&lt;xs:restriction</span> <span class="re0">base</span>=<span class="st0">&quot;xs:integer&quot;</span><span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1">                                <span class="sc3"><span class="re1">&lt;xs:enumeration</span> <span class="re0">value</span>=<span class="st0">&quot;1&quot;</span><span class="re2">/&gt;</span></span></div></li><li class="li1"><div class="de1">                                <span class="sc3"><span class="re1">&lt;xs:enumeration</span> <span class="re0">value</span>=<span class="st0">&quot;2&quot;</span><span class="re2">/&gt;</span></span></div></li><li class="li1"><div class="de1">                            <span class="sc3"><span class="re1">&lt;/xs:restriction<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">                        <span class="sc3"><span class="re1">&lt;/xs:simpleType<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">                    <span class="sc3"><span class="re1">&lt;/xs:attribute<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">                    <span class="sc3"><span class="re1">&lt;xs:attribute</span> <span class="re0">name</span>=<span class="st0">&quot;especialitat&quot;</span> <span class="re0">use</span>=<span class="st0">&quot;required&quot;</span><span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1">                        <span class="sc3"><span class="re1">&lt;xs:simpleType<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">                            <span class="sc3"><span class="re1">&lt;xs:restriction</span> <span class="re0">base</span>=<span class="st0">&quot;xs:string&quot;</span><span class="re2">&gt;</span></span></div></li><li class="li1"><div class="de1">                                <span class="sc3"><span class="re1">&lt;xs:enumeration</span> <span class="re0">value</span>=<span class="st0">&quot;ASIX&quot;</span><span class="re2">/&gt;</span></span></div></li><li class="li1"><div class="de1">                                <span class="sc3"><span class="re1">&lt;xs:enumeration</span> <span class="re0">value</span>=<span class="st0">&quot;SMX&quot;</span><span class="re2">/&gt;</span></span></div></li><li class="li1"><div class="de1">                            <span class="sc3"><span class="re1">&lt;/xs:restriction<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">                        <span class="sc3"><span class="re1">&lt;/xs:simpleType<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">                    <span class="sc3"><span class="re1">&lt;/xs:attribute<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">                <span class="sc3"><span class="re1">&lt;/xs:complexType<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">            <span class="sc3"><span class="re1">&lt;/xs:element<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">        <span class="sc3"><span class="re1">&lt;/xs:sequence<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1">        <span class="sc3"><span class="re1">&lt;xs:attribute</span> <span class="re0">name</span>=<span class="st0">&quot;modul&quot;</span> <span class="re0">use</span>=<span class="st0">&quot;required&quot;</span> <span class="re0">type</span>=<span class="st0">&quot;xs:integer&quot;</span> <span class="re2">/&gt;</span></span></div></li><li class="li1"><div class="de1">        <span class="sc3"><span class="re1">&lt;xs:attribute</span> <span class="re0">name</span>=<span class="st0">&quot;nommodul&quot;</span> <span class="re0">use</span>=<span class="st0">&quot;required&quot;</span> <span class="re0">type</span>=<span class="st0">&quot;xs:string&quot;</span> <span class="re2">/&gt;</span></span></div></li><li class="li1"><div class="de1">    <span class="sc3"><span class="re1">&lt;/xs:complexType<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;/xs:element<span class="re2">&gt;</span></span></span></div></li><li class="li1"><div class="de1"><span class="sc3"><span class="re1">&lt;/xs:schema<span class="re2">&gt;</span></span></span> </div></li></ol></pre>

</div>

<h2><a id="conversio_entre_esquemes" >Conversió entre esquemes</a></h2>
<div class="level2">

<p>
Una de les eines que s’han de tenir en compte a l’hora de fer esquemes és que ja hi ha eines que permeten convertir els llenguatges de definició d’esquemes d’un format a un altre.
</p>

<p>
A pesar d’això sempre s’hauran de revisar els resultats per comprovar que no s’ha perdut cap significat important en fer la conversió, ja que els sistemes automàtics no són perfectes.
</p>

<p>
La majoria dels editors XML porten alguna eina per fer la conversió (<span class="figref"><a href="#fig106"><span>figura</span></a></span>) però també hi ha eines específiques per fer conversions, com el programa de codi obert Trang.
</p>
<div class="iocfigure"><a name="fig106"></a><figure>
<figcaption><span class="figuretitle">Figura</span>

 L’oXygen permet convertir els esquemes d’un format a un altre

</figcaption><img src="../media/conversio.png" alt="" /></figure>
</div>
</div>

<h3><a id="trang" >Trang</a></h3>
<div class="level3">

<p>
El Trang és un programa de codi obert que permet convertir les definicions de vocabularis fetes en un sistema a un altre. Pot convertir els llenguatges següents:
</p>
<ul>
<li class="level1"><div class="li"> RELAX NG (XML syntax)</div>
</li>
<li class="level1"><div class="li"> RELAX NG compact syntax</div>
</li>
<li class="level1"><div class="li"> XML 1.0 DTD</div>
</li>
<li class="level1"><div class="li"> <acronym title="World Wide Web Consortium">W3C</acronym> XML Schema</div>
</li>
</ul>

<p>
Per fer la conversió simplement hem d’especificar el fitxer que es vol convertir i en què es vol convertir. L’única condició és que l’esquema d’origen no sigui un XML Schema.
</p>

<p>
Es pot convertir fent servir fitxers que tinguin les extensions per defecte: DTD (.dtd), XML Schemas (.xsd), RELAX NG (.rng), RELAX NG compact (.rnc). 
</p>

<p>
Amb això es crearà <code>alumnes.xsd</code> a partir d<code>‘alumnes.dtd</code>.
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1"><span class="co4">$ </span>trang alumnes.dtd alumnes.xsd</div></li></ol></pre>

<p>
O bé especificant explícitament quin és el tipus de fitxer d’entrada (<code>-I</code>) i quin el de sortida (<code>-O</code>).
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1"><span class="co4">$ </span>trang <span class="re5">-I</span> dtd <span class="re5">-O</span> xsd alumnes.dtd alumnes.xsd</div></li></ol></pre>

<p>
Una de les característiques interessants que té és que pot crear el vocabulari basant-se en fitxers XML de mostra. A partir del fitxer XML, <code>alumnes.xml</code>, es pot fer que el Trang generi automàticament l’XML Schema que el validaria executant:
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1"><span class="co4">$ </span>trang alumnes.xml alumnes.xsd</div></li></ol></pre>

<p>
Si es tenen diversos documents XML també pot generar l’esquema associat amb aquests:
</p>
<pre class="code bash"><ol><li class="li1"><div class="de1"><span class="co4">$ </span>trang <span class="sy0">*</span>.xml alumnes.xsd</div></li></ol></pre>

</div>

	 </article>
     <div class="pnpage">
      <div class="left-corner"></div>
      <div id="prevpage">Anar a la p&agrave;gina anterior:<br /><a href="../../../WebContent/u2/a1/exercicis.html">Exercicis d'autoavaluació</a></div>
      <div id="nextpage">Anar a la p&agrave;gina seg&uuml;ent:<br /><a href="../../../WebContent/u2/a2/activitats.html">Activitats</a></div>
      <div class="right-corner"></div>
     </div>
    </div>
    <footer class="footer">
      <div><small>Aquest document està subjecte a una llicència oberta de Creative Commons, es reserva el dret de reconeixement de l'autoria, d'exigir que no se'n faci cap mena d'ús comercial. Si altereu o transformeu aquesta obra, o en genereu obres derivades, només podeu distribuir l'obra generada amb una llicència idèntica a aquesta.</small></div>
    </footer>
 </div>
 <div id="back_preview" class="hidden"></div>
 <div id="preview" class="hidden">
  <div class="prevcontent"></div>
 </div>
 <div id="help-tooltips">
  <div id="help-toc" class="hidden tooltip"><span>Taula de continguts:</span> Ofereix una vista general de l&#39;estructura del m&ograve;dul, que us facilitar&agrave; la navegaci&oacute; a trav&eacute;s dels seus continguts.<span class="arrow-left"></span></div> 
  <div id="help-settings" class="hidden tooltip"><span>Opcions de format:</span> Permet configurar el format de lectura a partir de les vostres prefer&egrave;ncies, modificant la mida de la lletra, el color del fons, l&#39;amplada de la p&agrave;gina o l&#39;ocultaci&oacute; dels continguts complementaris, entre d&#39;altres.<span class="arrow-left"></span></div>
  <div id="help-printer" class="hidden tooltip"><span>Imprimir:</span>  Envia el contingut seleccionat a la impressora.<span class="arrow-left"></span></div>
  <div id="help-favorites" class="hidden tooltip"><span>Prefereits:</span> Permet desar aquelles parts del contingut a les que us interessi accedir en un moment posterior; us permetr&agrave; anar creant un repositori personalitzat de les seccions que considereu m&eacute;s rellevants. Un cop l&#39;hageu començat a fer servir se us mostrar&agrave; a sota un comptador que us informar&agrave; del nombre de preferits que s&#39;hagin emmagatzemat fins al moment.<span class="arrow-left"></span></div>
  <div id="help-favcounter" class="hidden tooltip"><span>Comptador i llistat de preferits:</span> Indica el nombre de preferits que s&#39;han desat fins el moment; clicant damunt seu accedireu al llistat de preferits, i a trav&eacute;s d&#39;aquest podreu accedir directament als continguts que hageu emmagatzemat.<span class="arrow-left"></span></div>
  <div id="help-help_icon" class="hidden tooltip"><span>Ajuda:</span> Aquesta opci&oacute; activa la informaci&oacute; de les funcionalitats del web tot situant el punter del ratol&iacute; al damunt dels diferents &iacute;tems.<span class="arrow-left"></span></div>
  <div id="help-sidebar-hide" class="hidden tooltip"><span>Mostrar/Ocultar barra lateral:</span>  Deshabilita la barra d&#39;opcions, permetent la seva recuperaci&oacute; quan es desitgi.<span class="arrow-left"></span></div>
  <div id="help-search" class="hidden tooltip"><span>Cerca:</span>  Introdu&iuml;u les paraules clau sobre aquells conceptes que desitgeu localitzar en els continguts del m&ograve;dul. Tamb&eacute; podeu excloure un terme de la cerca tot afegint-hi el signe &#8220;-&#8221; al davant.<span class="arrow-top"></span></div>
  <div id="help-header" class="hidden tooltip"><span>Cap&ccedil;alera:</span>  Indica l&#39;apartat o secci&oacute; que es mostra en pantalla. Tingueu present que les capçaleres de segon, tercer i quart nivell tamb&eacute; es poden desar com a marcadors.<span class="arrow-left"></span></div>
</div> 
</body>
</html>
